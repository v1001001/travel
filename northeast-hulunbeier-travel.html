<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸œåŒ—+å‘¼ä¼¦è´å°”15å¤©ç²¾åç¯çº¿è‡ªé©¾æ¸¸</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .overview-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .route-map {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .route-map h3 {
            color: #2d3436;
            margin-bottom: 15px;
        }

        .route-points {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .route-point {
            background: #74b9ff;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .trip-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .day-title {
            font-size: 1.5rem;
            color: #2d3436;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #74b9ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-number {
            background: #74b9ff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .route-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #74b9ff;
        }

        .route-info h4 {
            color: #2d3436;
            margin-bottom: 8px;
        }

        .route-info p {
            color: #636e72;
            line-height: 1.6;
        }

        .attractions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .attraction-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .attraction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .attraction-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        /* ä¸‰å›¾æ‹¼è´´æ ·å¼ï¼Œé¿å…å›¾ç‰‡é£æ ¼é‡å¤ */
        .photo-collage {
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-template-rows: 100px 100px;
            gap: 6px;
            height: 206px;
            padding: 3px;
            background: #f8f9fa;
        }

        .photo-collage img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .photo-collage img.main {
            grid-row: 1 / span 2;
            grid-column: 1 / 2;
        }

        .photo-collage img.side {
            grid-column: 2 / 3;
        }

        .attraction-content {
            padding: 20px;
        }

        .attraction-title {
            font-size: 1.2rem;
            color: #2d3436;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .attraction-description {
            color: #636e72;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .attraction-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #74b9ff;
        }

        .highlights-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .highlight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .highlight-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tips-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .tips-list {
            list-style: none;
            padding: 0;
        }

        .tips-list li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tips-list li:before {
            content: "ğŸ’¡";
            font-size: 1.2rem;
        }

        .tips-list li:last-child {
            border-bottom: none;
        }

        .timeline-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #74b9ff;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #74b9ff;
            border: 3px solid white;
        }

        .timeline-date {
            font-weight: bold;
            color: #74b9ff;
            margin-bottom: 5px;
        }

        .timeline-title {
            font-size: 1.1rem;
            color: #2d3436;
            margin-bottom: 5px;
        }

        .timeline-desc {
            color: #636e72;
            font-size: 0.9rem;
        }

        /* è¯¦æƒ…ä¸è½¨è¿¹æ ·å¼ */
        .details-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .day-card {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 14px;
        }

        .day-card h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3436;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px 18px;
            margin-top: 10px;
        }

        .info-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.95rem;
            color: #2d3436;
        }

        .info-item b {
            color: #0984e3;
        }

        .cta-row {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .cta-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: #fff;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .cta-btn.secondary {
            background: #f8f9fa;
            color: #0984e3;
            border: 1px solid #cde5ff;
        }

        .track-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .track-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        #trackCanvas {
            width: 100%;
            height: 360px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        #leafletMap,
        #routeMap {
            width: 100%;
            height: 520px;
            border-radius: 12px;
            margin-top: 12px;
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .stats {
                flex-direction: column;
                gap: 15px;
            }

            .attractions-grid {
                grid-template-columns: 1fr;
            }

            .route-points {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ä¸œåŒ—+å‘¼ä¼¦è´å°”15å¤©ç²¾åç¯çº¿</h1>
            <p>ç©¿è¶Šé•¿ç™½å±±ã€å¤§å…´å®‰å²­ã€å‘¼ä¼¦è´å°”è‰åŸçš„å²è¯—çº§è‡ªé©¾ä¹‹æ—…</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number">15</span>
                    <span>è¡Œç¨‹å¤©æ•°</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">5000</span>
                    <span>æ€»é‡Œç¨‹(å…¬é‡Œ)</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">20+</span>
                    <span>ä¸»è¦æ™¯ç‚¹</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">5</span>
                    <span>æ ¸å¿ƒåŒºåŸŸ</span>
                </div>
            </div>
        </div>

        <div class="overview-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">ğŸ—ºï¸ ç¯çº¿è·¯çº¿æ¦‚è§ˆï¼ˆéå®Œå…¨é—­ç¯ï¼Œç»ˆç‚¹æµ·æ‹‰å°”ï¼‰</h2>
            <div class="route-map">
                <h3>é•¿æ˜¥ â†’ é•¿ç™½å±± â†’ å“ˆå°”æ»¨ â†’ æ¼ æ²³ â†’ é¢å°”å¤çº³ â†’ æµ·æ‹‰å°” â†’ é˜¿å°”å±± â†’ æµ·æ‹‰å°”</h3>
                <div class="route-points">
                    <div class="route-point">é•¿æ˜¥</div>
                    <div class="route-point">é•¿ç™½å±±</div>
                    <div class="route-point">å“ˆå°”æ»¨</div>
                    <div class="route-point">æ¼ æ²³</div>
                    <div class="route-point">é¢å°”å¤çº³</div>
                    <div class="route-point">æµ·æ‹‰å°”</div>
                    <div class="route-point">é˜¿å°”å±±</div>
                    <div class="route-point">æµ·æ‹‰å°”ï¼ˆç»ˆï¼‰</div>
                </div>
            </div>
        </div>

        <div class="timeline-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">ğŸ“… è¯¦ç»†è¡Œç¨‹æ—¶é—´çº¿ï¼ˆç»ˆç‚¹ï¼šæµ·æ‹‰å°”ï¼‰</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬1-2å¤© (9æœˆ25-26æ—¥)</div>
                    <div class="timeline-title">é•¿æ˜¥ â†’ é•¿ç™½å±±</div>
                    <div class="timeline-desc">é•¿ç™½å±±å¤©æ± ã€ç€‘å¸ƒã€æ¸©æ³‰ï¼Œç§‹å­£è‰²å½©æ–‘æ–“</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬3-4å¤© (9æœˆ27-28æ—¥)</div>
                    <div class="timeline-title">é•¿ç™½å±± â†’ å“ˆå°”æ»¨</div>
                    <div class="timeline-desc">ä¸­å¤®å¤§è¡—ã€åœ£ç´¢è²äºšæ•™å ‚ã€å¤ªé˜³å²›</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬5-7å¤© (9æœˆ29æ—¥-10æœˆ1æ—¥)</div>
                    <div class="timeline-title">å“ˆå°”æ»¨ â†’ æ¼ æ²³</div>
                    <div class="timeline-desc">é‡‘å±±é¹¿è‹‘ã€ç•Œæ±Ÿé£å…‰ã€åŒ—ææ‘ã€é¾™æ±Ÿç¬¬ä¸€æ¹¾</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬8-10å¤© (10æœˆ2-4æ—¥)</div>
                    <div class="timeline-title">æ¼ æ²³ â†’ é¢å°”å¤çº³</div>
                    <div class="timeline-desc">å¤§å…´å®‰å²­ç©¿è¶Šã€ç™½æ¡¦æ—ã€æ¹¿åœ°ã€è‰åŸé£å…‰</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬11-13å¤© (10æœˆ5-7æ—¥)</div>
                    <div class="timeline-title">æµ·æ‹‰å°” â†’ é˜¿å°”å±±</div>
                    <div class="timeline-desc">æ»¡æ´²é‡Œå›½é—¨ã€è¾¹å¢ƒå…¬è·¯ã€é˜¿å°”å±±å¤©æ± </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">ç¬¬14å¤© (10æœˆ8æ—¥)</div>
                    <div class="timeline-title">é˜¿å°”å±± â†’ æµ·æ‹‰å°”ï¼ˆè¿”ç¨‹æ›´ä¾¿æ·ï¼‰</div>
                    <div class="timeline-desc">æ™šçœ‹è«æ—¥æ ¼å‹’æ²³æ—¥è½ï¼Œæµ·æ‹‰å°”æ”¶å®˜ï¼Œæ¬¡æ—¥é£è¿”</div>
                </div>
            </div>
        </div>

        <div class="trip-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">ğŸ”ï¸ æ ¸å¿ƒåŒºåŸŸè¯¦è§£</h2>

            <!-- é•¿ç™½å±±åŒºåŸŸ -->
            <div class="day-title">
                <div class="day-number">1</div>
                <span>é•¿ç™½å±±åŒºåŸŸ</span>
            </div>
            <div class="route-info">
                <h4>ğŸ”ï¸ åŒºåŸŸç‰¹è‰²</h4>
                <p>ç§‹å­£çš„é•¿ç™½å±±è‰²å½©æ–‘æ–“ï¼Œå¤©æ± ã€ç€‘å¸ƒã€æ¸©æ³‰æ„æˆç»ç¾ç”»å·ã€‚å»ºè®®æ¸¸è§ˆåŒ—å¡å’Œè¥¿å¡ï¼Œä½“éªŒä¸åŒçš„è§†è§’ã€‚</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop"
                        alt="é•¿ç™½å±±å¤©æ± " class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">é•¿ç™½å±±å¤©æ± </div>
                        <div class="attraction-description">ä¸­å›½æœ€é«˜ç«å±±æ¹–ï¼Œç§‹å­£å€’æ˜ ç€äº”å½©æ–‘æ–“çš„å±±æ—ï¼Œç¾ä¸èƒœæ”¶ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ é•¿ç™½å±±</span>
                            <span>â° å»ºè®®4-5å°æ—¶</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?auto=format&w=1200&q=80"
                        alt="é•¿ç™½å±±ç€‘å¸ƒ" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">é•¿ç™½å±±ç€‘å¸ƒ</div>
                        <div class="attraction-description">è½å·®68ç±³çš„å£®è§‚ç€‘å¸ƒï¼Œç§‹å­£æ°´é‡å……æ²›ï¼Œæ°”åŠ¿ç£…ç¤´ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ é•¿ç™½å±±</span>
                            <span>â° å»ºè®®2å°æ—¶</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¤§å…´å®‰å²­åŒºåŸŸ -->
            <div class="day-title">
                <div class="day-number">2</div>
                <span>å¤§å…´å®‰å²­åŒºåŸŸ</span>
            </div>
            <div class="route-info">
                <h4>ğŸŒ² åŒºåŸŸç‰¹è‰²</h4>
                <p>ç©¿è¶ŠåŸå§‹æ£®æ—ï¼Œä½“éªŒä¸æ¢…èŠ±é¹¿çš„äº²å¯†æ¥è§¦ï¼Œæ¬£èµç•Œæ±Ÿé£å…‰ï¼Œæ„Ÿå—è¾¹å¢ƒçš„ç‹¬ç‰¹é­…åŠ›ã€‚</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80"
                        alt="é‡‘å±±é¹¿è‹‘" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">é‡‘å±±é¹¿è‹‘</div>
                        <div class="attraction-description">ä¸æ¢…èŠ±é¹¿äº²å¯†æ¥è§¦ï¼Œä½“éªŒä¸é¹¿ç¾¤äº’åŠ¨çš„ä¹è¶£ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ ä¼Šæ˜¥å¸‚</span>
                            <span>â° å»ºè®®2-3å°æ—¶</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80"
                        alt="åŒ—ææ‘" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">åŒ—ææ‘</div>
                        <div class="attraction-description">å¯»æ‰¾"æœ€åŒ—ä¹‹å®¶"ï¼Œä½“éªŒç¥–å›½æœ€åŒ—ç«¯çš„ç‹¬ç‰¹é­…åŠ›ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ æ¼ æ²³å¸‚</span>
                            <span>â° å»ºè®®3-4å°æ—¶</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å‘¼ä¼¦è´å°”è‰åŸ -->
            <div class="day-title">
                <div class="day-number">3</div>
                <span>å‘¼ä¼¦è´å°”è‰åŸ</span>
            </div>
            <div class="route-info">
                <h4>ğŸŒ¾ åŒºåŸŸç‰¹è‰²</h4>
                <p>å¹¿è¢¤çš„è‰åŸã€èœ¿èœ’çš„æ²³æµã€æˆç¾¤çš„ç‰›ç¾Šï¼Œæ„æˆäº†ä¸€å¹…å£®ç¾çš„è‰åŸç”»å·ã€‚</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80"
                        alt="é¢å°”å¤çº³æ¹¿åœ°" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">é¢å°”å¤çº³æ¹¿åœ°</div>
                        <div class="attraction-description">äºšæ´²ç¬¬ä¸€æ¹¿åœ°ï¼Œç§‹å­£è‰²å½©æ–‘æ–“ï¼Œæ˜¯æ‘„å½±çˆ±å¥½è€…çš„å¤©å ‚ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ é¢å°”å¤çº³å¸‚</span>
                            <span>â° å»ºè®®3-4å°æ—¶</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1491555103944-7c647fd857e6?auto=format&w=1200&q=80"
                        alt="æ»¡æ´²é‡Œå›½é—¨" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">æ»¡æ´²é‡Œå›½é—¨</div>
                        <div class="attraction-description">ä¸­ä¿„è¾¹å¢ƒæ ‡å¿—æ€§å»ºç­‘ï¼Œæ„Ÿå—è¾¹å¢ƒåŸå¸‚çš„ç‹¬ç‰¹é­…åŠ›ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ æ»¡æ´²é‡Œå¸‚</span>
                            <span>â° å»ºè®®2å°æ—¶</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é˜¿å°”å±±ç«å±± -->
            <div class="day-title">
                <div class="day-number">4</div>
                <span>é˜¿å°”å±±ç«å±±</span>
            </div>
            <div class="route-info">
                <h4>ğŸŒ‹ åŒºåŸŸç‰¹è‰²</h4>
                <p>ç«å±±åœ°è²Œä¸æ£®æ—æ¸©æ³‰çš„å®Œç¾ç»“åˆï¼Œç§‹å­£çš„é˜¿å°”å±±è‰²å½©ä¸°å¯Œï¼Œæ˜¯æ‘„å½±å’Œä¼‘é—²çš„ç»ä½³å»å¤„ã€‚</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1502786129293-79981df4e689?auto=format&w=1200&q=80"
                        alt="é˜¿å°”å±±å¤©æ± " class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">é˜¿å°”å±±å¤©æ± </div>
                        <div class="attraction-description">ç«å±±å£æ¹–ï¼Œç§‹å­£å€’æ˜ ç€äº”å½©æ–‘æ–“çš„å±±æ—ï¼Œç¾ä¸èƒœæ”¶ã€‚</div>
                        <div class="attraction-details">
                            <span>ğŸ“ é˜¿å°”å±±å¸‚</span>
                            <span>â° å»ºè®®3-4å°æ—¶</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="highlights-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">ğŸŒŸ è¡Œç¨‹äº®ç‚¹</h2>
            <div class="highlights-grid">
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸ”ï¸</div>
                    <h3>é•¿ç™½å±±å¤©æ± </h3>
                    <p>ç§‹å­£è‰²å½©æ–‘æ–“</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸ¦Œ</div>
                    <h3>é‡‘å±±é¹¿è‹‘</h3>
                    <p>ä¸æ¢…èŠ±é¹¿äº²å¯†æ¥è§¦</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸ“</div>
                    <h3>åŒ—ææ‘</h3>
                    <p>ç¥–å›½æœ€åŒ—åæ ‡</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸŒ¾</div>
                    <h3>å‘¼ä¼¦è´å°”è‰åŸ</h3>
                    <p>å¹¿è¢¤è‰åŸé£å…‰</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸŒ‹</div>
                    <h3>é˜¿å°”å±±ç«å±±</h3>
                    <p>ç«å±±åœ°è²Œå¥‡è§‚</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ğŸ›ï¸</div>
                    <h3>æ»¡æ´²é‡Œå›½é—¨</h3>
                    <p>è¾¹å¢ƒé£æƒ…ä½“éªŒ</p>
                </div>
            </div>
        </div>

        <!-- è¡Œç¨‹ç»†èŠ‚ / äº¤é€š / ä½å®¿ -->
        <div class="details-section">
            <h2 style="color: #2d3436; margin-bottom: 18px; text-align: center;">ğŸ§­ æ¯æ—¥è¡Œç¨‹ç»†èŠ‚ Â· äº¤é€š Â· ä½å®¿</h2>
            <div id="dayDetails"></div>
        </div>

        <!-- è½¨è¿¹å›¾ -->
        <div class="track-section">
            <h2 style="color: #2d3436; margin-bottom: 12px; text-align: center;">ğŸ“ æ—…æ¸¸è½¨è¿¹å›¾ï¼ˆå«åŸå¸‚åœ°é“ç¤ºæ„ï¼‰</h2>
            <div class="track-toolbar">
                <button class="cta-btn" onclick="renderTrack('car')">æ˜¾ç¤ºé©¾è½¦è½¨è¿¹</button>
                <button class="cta-btn secondary" onclick="renderTrack('metro')">æ˜¾ç¤ºåœ°é“ç¤ºæ„</button>
                <button class="cta-btn secondary" onclick="renderTrack('both')">åŒæ—¶æ˜¾ç¤º</button>
                <button class="cta-btn" onclick="toggleRouteMap()">è·¯çº¿è§„åˆ’å›¾</button>
                <button class="cta-btn" onclick="toggleTopoMap()">é£æ™¯åœ°å½¢å›¾</button>
            </div>
            <div style="position: relative;">
                <canvas id="trackCanvas"></canvas>
                <div id="trackTooltip"
                    style="position:absolute; display:none; pointer-events:none; background:#ffffff; border:1px solid #e9ecef; border-radius:8px; padding:10px; box-shadow:0 8px 20px rgba(0,0,0,0.12); max-width:260px;">
                    <div id="tooltipTitle" style="font-weight:600; color:#2d3436; margin-bottom:6px; font-size:13px;">
                    </div>
                    <img id="tooltipImg" src="" alt=""
                        style="width:100%; height:140px; object-fit:cover; border-radius:6px; margin-bottom:6px;" />
                    <div id="tooltipMeta" style="font-size:12px; color:#636e72;"></div>
                </div>
            </div>
            <div id="routeMap"></div>
            <div id="leafletMap"></div>
        </div>

        <div class="tips-section">
            <h2 style="color: #2d3436; margin-bottom: 30px;">ğŸ’¡ å®ç”¨è´´å£«</h2>
            <ul class="tips-list">
                <li>å»ºè®®9æœˆ25æ—¥-10æœˆ9æ—¥å‡ºè¡Œï¼Œé¿å¼€åä¸€é«˜å³°ï¼Œç§‹è‰²æœ€ç¾</li>
                <li>å»ºè®®4-6äººæ‹¼è½¦ï¼Œè´¹ç”¨AAï¼Œè¶Šé‡è½¦ä¼˜å…ˆ</li>
                <li>è¾¹å¢ƒå…¬è·¯éƒ¨åˆ†è·¯æ®µæ— ä¿¡å·ï¼Œæå‰ä¸‹è½½ç¦»çº¿åœ°å›¾</li>
                <li>å¥‡ä¹¾éœ€åŠç†ã€Šé˜²ç«è¯ã€‹ï¼Œæ‰¾å½“åœ°å‘å¯¼ååŠ©</li>
                <li>é˜¿å°”å±±é—¨ç¥¨48å°æ—¶æœ‰æ•ˆï¼Œä½æ™¯åŒºå†…çœæ—¶çœé’±</li>
                <li>è‰åŸæ˜¼å¤œæ¸©å·®å¤§ï¼Œ9æœˆåº•ä¹Ÿéœ€å¸¦å†²é”‹è¡£</li>
                <li>åŒ…è½¦é€‰æœ¬åœ°å¸æœºï¼Œç†Ÿæ‚‰è·¯å†µå’Œå½“åœ°æƒ…å†µ</li>
                <li>æå‰é¢„è®¢ä½å®¿ï¼Œç‰¹åˆ«æ˜¯å¥‡ä¹¾ã€é˜¿å°”å±±ç­‰çƒ­é—¨åœ°</li>
                <li>å‡†å¤‡ç°é‡‘å’Œç§»åŠ¨æ”¯ä»˜å·¥å…·</li>
                <li>æ³¨æ„è¾¹å¢ƒåœ°åŒºçš„ç‰¹æ®Šè§„å®šå’Œè¯ä»¶è¦æ±‚</li>
            </ul>
        </div>
    </div>

    <script>
        // è¡Œç¨‹æ•°æ®ä¸åæ ‡
        const placeCoords = {
            "é•¿æ˜¥": [125.3235, 43.8171],
            "é•¿ç™½å±±": [128.08, 42.05],
            "å“ˆå°”æ»¨": [126.534967, 45.803775],
            "ä¼Šæ˜¥": [128.899396, 47.727272],
            "é»‘æ²³": [127.499023, 50.245234],
            "åŒ—ææ‘": [122.365234, 53.558654],
            "æ ¹æ²³": [121.516, 50.783],
            "é¢å°”å¤çº³": [120.182, 50.243],
            "æµ·æ‹‰å°”": [119.736, 49.213],
            "æ»¡æ´²é‡Œ": [117.458, 49.588],
            "é˜¿å°”å±±": [119.943, 47.177],
            "ç™½åŸ": [122.839, 45.619]
        };

        const tripDays = [
            {
                d: 1, title: "é•¿æ˜¥ â†’ äºŒé“ç™½æ²³ï¼ˆé•¿ç™½å±±é•‡ï¼‰", start: "é•¿æ˜¥", end: "é•¿ç™½å±±", distance: 350, hours: 5.5,
                plan: ["æŠµè¾¾é•¿æ˜¥å–è½¦/æ£€è½¦", "åˆåå‡ºå‘ï¼Œä¸Šé•¿å‰é«˜é€Ÿâ€”æŠšé•¿é«˜é€Ÿ", "æ™šæŠµäºŒé“ç™½æ²³åŠç†å…¥ä½"],
                cityMetro: "é•¿æ˜¥åœ°é“ï¼šå¦‚å¸‚åŒºå–è½¦å¯ä¹˜åœ°é“1/2å·çº¿è‡³è¿‘ç«™ï¼ˆäººæ°‘å¹¿åœº/è§£æ”¾å¤§è·¯ï¼‰åæ­¥è¡Œå–è½¦",
                alt: "å…¬å…±äº¤é€šï¼šé•¿æ˜¥â†’ç™½æ²³é«˜é“ï¼ˆ2.5hï¼‰ï¼Œç™½æ²³ç«™æ‹¼è½¦/æ‰“è½¦è‡³é…’åº—",
                stay: "äºŒé“ç™½æ²³é•‡å†…æ¸©æ³‰é…’åº—ï¼ˆå»ºè®®ï¼šå¸Œå°”é¡¿æ¬¢æœ‹/ä¸‡è¾¾å°é•‡æ°‘å®¿ï¼‰"
            },
            {
                d: 2, title: "é•¿ç™½å±±ä¸€æ—¥ï¼ˆåŒ—å¡/è¥¿å¡ï¼‰", start: "é•¿ç™½å±±", end: "é•¿ç™½å±±", distance: 60, hours: 2,
                plan: ["æ—©å…¥å›­ä¹˜ç¯ä¿è½¦ä¸Šå±±", "å¤©æ± â€”ç€‘å¸ƒâ€”æ¸©æ³‰ç¾¤â€”è°·åº•æ£®æ—ï¼ˆåŒ—å¡ï¼‰", "è‹¥ä½“åŠ›å…è®¸ä¸‹åˆèµ°è¥¿å¡å°é˜¶è§‚æ™¯"],
                cityMetro: "â€”",
                alt: "å›­åŒºç¯ä¿è½¦å¾ªç¯ï¼Œå›­å†…äº¤é€šä¾¿åˆ©",
                stay: "äºŒé“ç™½æ²³åŒå‰ä¸€æ™š"
            },
            {
                d: 3, title: "é•¿ç™½å±± â†’ å“ˆå°”æ»¨ï¼ˆå¸‚åŒºæ¸¸ï¼‰", start: "é•¿ç™½å±±", end: "å“ˆå°”æ»¨", distance: 520, hours: 7,
                plan: ["æ—©é¤åå‡ºå‘ï¼Œç»é¹¤å¤§/G11è‡³å“ˆå°”æ»¨", "æ™šé—´ä¸­å¤®å¤§è¡—æ­¥è¡Œã€ç´¢è²äºšæ•™å ‚å¤œæ™¯"],
                cityMetro: "å“ˆå°”æ»¨åœ°é“2å·çº¿ï¼šä¸­å¤®å¤§è¡—ç«™ï¼›1å·çº¿ï¼šåšç‰©é¦†/é“è·¯å±€ç«™ä¾¿æ·æ¢ä¹˜",
                alt: "å…¬å…±äº¤é€šï¼šå»¶å‰/ç™½æ²³â†’å“ˆå°”æ»¨èˆªç­æˆ–é«˜é“ï¼ˆè§†ç­æ¬¡ï¼‰",
                stay: "ä¸­å¤®å¤§è¡—/é“é‡ŒåŒºé…’åº—ï¼ˆå»ºè®®ï¼šä¸‡è¾¾æ–‡å/é¦™æ ¼é‡Œæ‹‰/è‹±è¿ªæ ¼ï¼‰"
            },
            {
                d: 4, title: "å“ˆå°”æ»¨ â†’ ä¼Šæ˜¥ï¼ˆé‡‘å±±é¹¿è‹‘ï¼‰", start: "å“ˆå°”æ»¨", end: "ä¼Šæ˜¥", distance: 330, hours: 4.5,
                plan: ["ä¸Šåˆå“ˆå°”æ»¨å¤ªé˜³å²›å…¬å›­", "åˆåé©±è½¦å‰å¾€ä¼Šæ˜¥ï¼Œå¤•é˜³æ¢è®¿é‡‘å±±é¹¿è‹‘"],
                cityMetro: "å“ˆå°”æ»¨åœ°é“1/2å·çº¿å¸‚å†…é€šå‹¤ï¼Œéšåè‡ªé©¾ç¦»åŸ",
                alt: "å“ˆå°”æ»¨â†’ä¼Šæ˜¥å¯é€‰Kå­—åˆ—è½¦ï¼ˆæ…¢ï¼‰ï¼Œå»ºè®®è‡ªé©¾",
                stay: "ä¼Šæ˜¥å¸‚åŒº/æ±¤æ—ºæ²³æ™¯åŒºå†…æ°‘å®¿"
            },
            {
                d: 5, title: "ä¼Šæ˜¥ â†’ é»‘æ²³ï¼ˆç•Œæ±Ÿé£å…‰ï¼‰", start: "ä¼Šæ˜¥", end: "é»‘æ²³", distance: 500, hours: 6.5,
                plan: ["æ²¿G331åŒ—ä¸Šï¼Œé€”ä¸­æ£®æ—å…¬è·¯è§‚æ™¯", "å‚æ™šæŠµé»‘æ²³å£å²¸ï¼Œå¤œè§‚å¯¹å²¸å¸ƒå¸‚ç¯ç«"],
                cityMetro: "â€”",
                alt: "ä¼Šæ˜¥â†’é»‘æ²³æ— ç›´è¾¾é«˜é“ï¼Œç­è½¦è€—æ—¶é•¿",
                stay: "é»‘æ²³å£å²¸å‘¨è¾¹é…’åº—ï¼ˆå»ºè®®ï¼šé”¦æ±Ÿ/å…¨å­£ï¼‰"
            },
            {
                d: 6, title: "é»‘æ²³ â†’ åŒ—ææ‘ï¼ˆé¾™æ±Ÿç¬¬ä¸€æ¹¾/ç™½æ¡¦æ—ï¼‰", start: "é»‘æ²³", end: "åŒ—ææ‘", distance: 620, hours: 9,
                plan: ["æ¸…æ™¨å‡ºå‘æ²¿ç•Œæ±Ÿå‰è¡Œï¼Œæ‰“å¡ç™½æ¡¦æ—", "ä¸‹åˆé¾™æ±Ÿç¬¬ä¸€æ¹¾ä¿¯ç°Î©å¤§å¼¯", "å‚æ™šæŠµåŒ—ææ‘æ‰¾â€œæœ€åŒ—â€åœ°æ ‡"],
                cityMetro: "â€”",
                alt: "æ²¿ç•Œæ±Ÿå›½é“ä¸ºä¸»ï¼Œæ³¨æ„è¡¥ç»™",
                stay: "åŒ—ææ‘å®¢æ ˆï¼ˆå»ºè®®ï¼šæœ€åŒ—ä¸€å®¶/åŒ—ææ˜Ÿå®¢æ ˆï¼‰"
            },
            {
                d: 7, title: "åŒ—ææ‘ï¼ˆæåœ°æ…¢æ¸¸ï¼‰", start: "åŒ—ææ‘", end: "åŒ—ææ‘", distance: 40, hours: 1,
                plan: ["æ‘å†…æ­¥è¡Œ/çŸ­é€”è‡ªé©¾ï¼šç¥å·åŒ—æå¹¿åœºã€åŒ—æå“¨æ‰€", "æ‹æ‘„æ—¥è½ä¸æ˜Ÿç©º"],
                cityMetro: "â€”",
                alt: "æ™¯åŒºå†…è§‚å…‰å°å·´/æ­¥è¡Œä¸ºä¸»",
                stay: "åŒ—ææ‘å®¢æ ˆåŒå‰"
            },
            {
                d: 8, title: "åŒ—ææ‘ â†’ æ ¹æ²³ï¼ˆç©¿è¶Šå¤§å…´å®‰å²­ï¼‰", start: "åŒ—ææ‘", end: "æ ¹æ²³", distance: 650, hours: 9.5,
                plan: ["æ—©å‡ºå‘ï¼Œç»å¡”æ²³/å‘¼ä¸­è½¬å‘å†…è’™å¤", "é€”ç»å†·ææ‘ç•™å½±"],
                cityMetro: "â€”",
                alt: "è·¯ç¨‹é•¿ï¼Œæ³¨æ„æ²¹é‡ä¸ä¼‘æ¯ç‚¹",
                stay: "æ ¹æ²³å¸‚åŒºå•†åŠ¡é…’åº—/æ°‘å®¿"
            },
            {
                d: 9, title: "æ ¹æ²³ â†’ é¢å°”å¤çº³ï¼ˆæ¹¿åœ°/ç™½æ¡¦æ—ï¼‰", start: "æ ¹æ²³", end: "é¢å°”å¤çº³", distance: 270, hours: 4,
                plan: ["ä¸Šåˆæ•–é²å¤é›…ä½¿é¹¿éƒ¨è½ï¼ˆå¯é€‰ï¼‰", "åˆåé¢å°”å¤çº³æ¹¿åœ°ç™»é«˜ä¿¯ç°"],
                cityMetro: "â€”",
                alt: "å½“åœ°åŒ…è½¦/ç½‘çº¦è½¦å¯è¾¾ä¸»è¦æ™¯ç‚¹",
                stay: "é¢å°”å¤çº³å¸‚åŒº/æ ¹æ²³æ¹¿åœ°æ™¯åŒºå‘¨è¾¹æ°‘å®¿"
            },
            {
                d: 10, title: "é¢å°”å¤çº³ â†’ æµ·æ‹‰å°”ï¼ˆè‰åŸå…¬è·¯ï¼‰", start: "é¢å°”å¤çº³", end: "æµ·æ‹‰å°”", distance: 180, hours: 3,
                plan: ["æ²¿è‰åŸå…¬è·¯å‰å¾€æµ·æ‹‰å°”", "é€”ä¸­å¯ç»•è¡Œç™½æ¡¦æ—å¤§é“/è«æ—¥æ ¼å‹’æ²³"],
                cityMetro: "â€”",
                alt: "æµ·æ‹‰å°”å¸‚å†…æ‰“è½¦æ–¹ä¾¿",
                stay: "æµ·æ‹‰å°”å¸‚ä¸­å¿ƒé…’åº—ï¼ˆå»ºè®®ï¼šä¸‡è¾¾å˜‰å/å‡¯æ‚¦å˜‰è½©ï¼‰"
            },
            {
                d: 11, title: "æµ·æ‹‰å°” â†’ æ»¡æ´²é‡Œï¼ˆå›½é—¨/å¥—å¨ƒå¹¿åœºï¼‰", start: "æµ·æ‹‰å°”", end: "æ»¡æ´²é‡Œ", distance: 190, hours: 2.5,
                plan: ["ä¸Šåˆæµ·æ‹‰å°”å¸‚åŒºè¡¥ç»™", "åˆåæ»¡æ´²é‡Œå›½é—¨ä¸å¥—å¨ƒå¹¿åœºå¤œæ™¯"],
                cityMetro: "â€”",
                alt: "ä¸¤åŸé—´é«˜é€Ÿè·¯å†µè‰¯å¥½",
                stay: "æ»¡æ´²é‡Œè¾¹å¢ƒé£æƒ…é…’åº—ï¼ˆå»ºè®®ï¼šå‡¯æ‚¦/å›½é—¨æ™¯è§‚æˆ¿ï¼‰"
            },
            {
                d: 12, title: "æ»¡æ´²é‡Œ â†’ é˜¿å°”å±±ï¼ˆæ—æµ·/ç«å±±ï¼‰", start: "æ»¡æ´²é‡Œ", end: "é˜¿å°”å±±", distance: 360, hours: 5.5,
                plan: ["ç©¿è¡Œæ—æµ·ï¼Œä¸‹åˆæŠµé˜¿å°”å±±å°é•‡", "æ™šæ³¡æ¸©æ³‰"],
                cityMetro: "â€”",
                alt: "æ²¿çœé“ä¸ºä¸»ï¼Œæ³¨æ„é™é€Ÿ",
                stay: "é˜¿å°”å±±æ¸©æ³‰é…’åº—/å…¬å›­å‘¨è¾¹æ°‘å®¿"
            },
            {
                d: 13, title: "é˜¿å°”å±±å›½å®¶æ£®æ—å…¬å›­ä¸€æ—¥", start: "é˜¿å°”å±±", end: "é˜¿å°”å±±", distance: 80, hours: 2,
                plan: ["å¤©æ± â€”çŸ³å¡˜æ—â€”ä¸‰æ½­å³¡ç¯çº¿", "é€‚å½“å¾’æ­¥æ‹æ‘„ç§‹è‰²"],
                cityMetro: "â€”",
                alt: "æ™¯åŒºç¯ä¿è½¦/è‡ªé©¾ç»“åˆï¼Œ48å°æ—¶é—¨ç¥¨å¯é‡å¤å…¥å›­",
                stay: "é˜¿å°”å±±åŒå‰"
            },
            {
                d: 14, title: "é˜¿å°”å±± â†’ æµ·æ‹‰å°”ï¼ˆæ”¶å®˜ï¼Œé£è¿”ä¸Šæµ·ï¼‰", start: "é˜¿å°”å±±", end: "æµ·æ‹‰å°”", distance: 270, hours: 3.5,
                plan: ["ä¸Šåˆé˜¿å°”å±±å¤©æ± /çŸ³å¡˜æ—è¡¥æ¼æ‹", "åˆåç»ä¹Œå…°æµ©ç‰¹æ–¹å‘æˆ–S203åŒ—ä¸Šè‡³æµ·æ‹‰å°”", "å‚æ™šè«æ—¥æ ¼å‹’æ²³è§‚æ—¥è½æ”¶å®˜"],
                cityMetro: "â€”",
                alt: "å¦‚é‡å µè½¦å¯ç»Xçº¿èµ°å‘¼ä¼¦æ¹–ä¸œå²¸å…¥åŸ",
                stay: "æµ·æ‹‰å°”å¸‚ä¸­å¿ƒ/æœºåœºå‘¨è¾¹é…’åº—ï¼ˆæ¬¡æ—¥é£è¿”æ›´ä¾¿æ·ï¼‰",
                flightLinks: [
                    { label: "æµ·æ‹‰å°”(HLD) â†’ ä¸Šæµ·è™¹æ¡¥(SHA) èˆªç­", url: "https://flights.ctrip.com/itinerary/oneway-HLD-SHA" },
                    { label: "æµ·æ‹‰å°”(HLD) â†’ ä¸Šæµ·æµ¦ä¸œ(PVG) èˆªç­", url: "https://flights.ctrip.com/itinerary/oneway-HLD-PVG" }
                ]
            }
        ];

        function amapNavLink(fromName, toName) {
            const from = placeCoords[fromName];
            const to = placeCoords[toName];
            if (!from || !to) return '#';
            const fromStr = `${from[0]},${from[1]},${encodeURIComponent(fromName)}`;
            const toStr = `${to[0]},${to[1]},${encodeURIComponent(toName)}`;
            return `https://uri.amap.com/navigation?from=${fromStr}&to=${toStr}&mode=car&policy=1`;
        }

        function renderDayDetails() {
            const wrap = document.getElementById('dayDetails');
            wrap.innerHTML = '';
            tripDays.forEach(day => {
                const div = document.createElement('div');
                div.className = 'day-card';
                const navUrl = amapNavLink(day.start, day.end);
                const flightHtml = (day.flightLinks && day.flightLinks.length)
                    ? `<div class="cta-row">${day.flightLinks.map(f => `<a class=\"cta-btn secondary\" href=\"${f.url}\" target=\"_blank\" rel=\"noopener\">âœˆï¸ ${f.label}</a>`).join('')}</div>`
                    : '';
                div.innerHTML = `
                    <h3>ç¬¬${day.d}å¤©ï½œ${day.title}</h3>
                    <div class="info-grid">
                        <div class="info-item"><b>æ—¶é—´å®‰æ’</b><br>${day.plan.join('ï¼›')}</div>
                        <div class="info-item"><b>è‡ªé©¾äº¤é€š</b><br>çº¦${day.distance}km Â· é¢„ä¼°${day.hours}å°æ—¶</div>
                        <div class="info-item"><b>å…¬å…±äº¤é€š</b><br>${day.alt}</div>
                        <div class="info-item"><b>åŸå¸‚åœ°é“/å¸‚å†…äº¤é€š</b><br>${day.cityMetro}</div>
                        <div class="info-item"><b>ä½å®¿å»ºè®®</b><br>${day.stay}</div>
                    </div>
                    <div class="cta-row">
                        <a class="cta-btn" href="${navUrl}" target="_blank" rel="noopener">ğŸ“ ä¸€é”®å¯¼èˆªï¼ˆé«˜å¾·ï¼‰</a>
                        <button class="cta-btn secondary" onclick="focusOn('${day.start}','${day.end}')">åœ¨è½¨è¿¹å›¾ä¸­é«˜äº®æœ¬æ—¥</button>
                    </div>
                    ${flightHtml}
                `;
                wrap.appendChild(div);
            });
        }

        // è½¨è¿¹å›¾æ¸²æŸ“
        // æ”¹ä¸ºéå®Œå…¨é—­ç¯ï¼šç»ˆç‚¹æµ·æ‹‰å°”ï¼ˆæ›´ä¾¿äºè¿”ç¨‹/é£å›ï¼‰
        const trackCities = ["é•¿æ˜¥", "é•¿ç™½å±±", "å“ˆå°”æ»¨", "ä¼Šæ˜¥", "é»‘æ²³", "åŒ—ææ‘", "æ ¹æ²³", "é¢å°”å¤çº³", "æµ·æ‹‰å°”", "æ»¡æ´²é‡Œ", "é˜¿å°”å±±", "æµ·æ‹‰å°”"];

        // åŸå¸‚-å¤©æ˜ å°„ï¼ˆç”¨äºæ®µè·/æ—¶é•¿æ ‡æ³¨ï¼‰
        const legToDay = {
            "é•¿æ˜¥-é•¿ç™½å±±": 1,
            "é•¿ç™½å±±-å“ˆå°”æ»¨": 3,
            "å“ˆå°”æ»¨-ä¼Šæ˜¥": 4,
            "ä¼Šæ˜¥-é»‘æ²³": 5,
            "é»‘æ²³-åŒ—ææ‘": 6,
            "åŒ—ææ‘-æ ¹æ²³": 8,
            "æ ¹æ²³-é¢å°”å¤çº³": 9,
            "é¢å°”å¤çº³-æµ·æ‹‰å°”": 10,
            "æµ·æ‹‰å°”-æ»¡æ´²é‡Œ": 11,
            "æ»¡æ´²é‡Œ-é˜¿å°”å±±": 12,
            "é˜¿å°”å±±-æµ·æ‹‰å°”": 14
        };

        // æ¯åŸç²¾é€‰å›¾ç‰‡ï¼ˆ1-3å¼ ï¼Œé¿å…é‡å¤é£æ ¼ï¼‰
        const poiBest = {
            "é•¿æ˜¥": {
                best: "å‡€æœˆæ½­/å—æ¹–ç§‹è‰²", imgs: [
                    "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&w=1200&q=80"
                ]
            },
            "é•¿ç™½å±±": {
                best: "å¤©æ± /ç€‘å¸ƒ/æ¸©æ³‰ç¾¤", imgs: [
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1508614999368-9260051291ea?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&w=1200&q=80"
                ]
            },
            "å“ˆå°”æ»¨": {
                best: "æ¾èŠ±æ±Ÿ/å¤ªé˜³å²›ç§‹è‰²", imgs: [
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80"
                ]
            },
            "ä¼Šæ˜¥": {
                best: "é‡‘å±±é¹¿è‹‘/ç™½æ¡¦æ—", imgs: [
                    "https://images.unsplash.com/photo-1501706362039-c6b2a034f1f0?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1474511320723-9a56873867b5?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&w=1200&q=80"
                ]
            },
            "é»‘æ²³": {
                best: "ç•Œæ±Ÿè½æ—¥/å£å²¸å¤œæ™¯", imgs: [
                    "https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&w=1200&q=80"
                ]
            },
            "åŒ—ææ‘": {
                best: "ç™½æ¡¦æ—/é¾™æ±Ÿç¬¬ä¸€æ¹¾/æœ€åŒ—åœ°æ ‡", imgs: [
                    "https://images.unsplash.com/photo-1533553493349-0f36c98a1a5d?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80"
                ]
            },
            "æ ¹æ²³": {
                best: "æ•–é²å¤é›…ä½¿é¹¿éƒ¨è½/å†·ææ‘", imgs: [
                    "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1491555103944-7c647fd857e6?auto=format&w=1200&q=80"
                ]
            },
            "é¢å°”å¤çº³": {
                best: "é¢å°”å¤çº³æ¹¿åœ°/æ²³æµå¼¯æ›²", imgs: [
                    "https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&w=1200&q=80"
                ]
            },
            "æµ·æ‹‰å°”": {
                best: "è«æ—¥æ ¼å‹’æ²³/è‰åŸæ—¥è½", imgs: [
                    "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&w=1200&q=80"
                ]
            },
            "æ»¡æ´²é‡Œ": {
                best: "å‘¼ä¼¦æ¹–/è‰åŸè¾¹å¢ƒçº¿", imgs: [
                    "https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&w=1200&q=80"
                ]
            },
            "é˜¿å°”å±±": {
                best: "å¤©æ± /çŸ³å¡˜æ—/ç«å±±åœ°è²Œ", imgs: [
                    "https://images.unsplash.com/photo-1502786129293-79981df4e689?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&w=1200&q=80"
                ]
            },
            "ç™½åŸ": {
                best: "å‘æµ·æ¹¿åœ°/èŠ¦è‹‡ç§‹è‰²", imgs: [
                    "https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80"
                ]
            }
        };

        function project(points, w, h, padding = 30) {
            const xs = points.map(p => p[0]);
            const ys = points.map(p => p[1]);
            const minX = Math.min(...xs), maxX = Math.max(...xs);
            const minY = Math.min(...ys), maxY = Math.max(...ys);
            const sx = (w - 2 * padding) / (maxX - minX);
            const sy = (h - 2 * padding) / (maxY - minY);
            return points.map(([x, y]) => [
                padding + (x - minX) * sx,
                // åè½¬Yè½´ï¼ˆåŒ—åœ¨ä¸Šï¼‰
                h - padding - (y - minY) * sy
            ]);
        }

        function renderTrack(mode = 'car') {
            const canvas = document.getElementById('trackCanvas');
            const ctx = canvas.getContext('2d');
            // å¤„ç†é«˜åˆ†å±
            const cssW = canvas.clientWidth;
            const cssH = canvas.clientHeight;
            const ratio = window.devicePixelRatio || 1;
            canvas.width = cssW * ratio;
            canvas.height = cssH * ratio;
            ctx.scale(ratio, ratio);

            ctx.clearRect(0, 0, cssW, cssH);

            // åº•å›¾ç½‘æ ¼
            ctx.strokeStyle = '#e9ecef';
            ctx.lineWidth = 1;
            for (let i = 40; i < cssW; i += 40) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, cssH); ctx.stroke(); }
            for (let j = 40; j < cssH; j += 40) { ctx.beginPath(); ctx.moveTo(0, j); ctx.lineTo(cssW, j); ctx.stroke(); }

            // åœ°å½¢åº•è‰²ï¼ˆç¤ºæ„ï¼‰ï¼šå±±åœ°(é•¿ç™½å±±/é˜¿å°”å±±)ã€æ£®æ—(å¤§å…´å®‰å²­)ã€è‰åŸ(å‘¼ä¼¦è´å°”)
            const geo = trackCities.map(n => placeCoords[n]);
            const projAll = project(geo, cssW, cssH);
            const idx = (name) => trackCities.indexOf(name);
            function fillArea(names, color) {
                const pts = names.map(n => projAll[idx(n)]).filter(Boolean);
                if (pts.length < 2) return;
                const pad = 40;
                const xs = pts.map(p => p[0]);
                const ys = pts.map(p => p[1]);
                const minX = Math.min(...xs) - pad, maxX = Math.max(...xs) + pad;
                const minY = Math.min(...ys) - pad, maxY = Math.max(...ys) + pad;
                ctx.fillStyle = color;
                ctx.globalAlpha = 0.10;
                ctx.fillRect(minX, minY, maxX - minX, maxY - minY);
                ctx.globalAlpha = 1.0;
            }
            fillArea(["é•¿ç™½å±±", "é˜¿å°”å±±"], '#2d3436'); // å±±åœ°
            fillArea(["ä¼Šæ˜¥", "é»‘æ²³", "åŒ—ææ‘"], '#27ae60'); // æ£®æ—
            fillArea(["æ ¹æ²³", "é¢å°”å¤çº³", "æµ·æ‹‰å°”", "æ»¡æ´²é‡Œ"], '#a3cb38'); // è‰åŸ

            // é©¾è½¦ä¸»è½¨è¿¹
            const proj = projAll;
            if (mode === 'car' || mode === 'both') {
                ctx.strokeStyle = '#0984e3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                proj.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
                ctx.stroke();
            }

            // æ ‡æ³¨èŠ‚ç‚¹
            ctx.fillStyle = '#2d3436';
            ctx.font = '12px sans-serif';
            window.__trackPoints = [];
            proj.forEach(([x, y], i) => {
                ctx.beginPath();
                ctx.fillStyle = '#74b9ff';
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#2d3436';
                ctx.fillText(trackCities[i], x + 6, y - 6);
                window.__trackPoints.push({ name: trackCities[i], x, y });
            });

            // åŸå¸‚åœ°é“ï¼ˆç¤ºæ„ï¼Œä»…åœ¨é•¿æ˜¥/å“ˆå°”æ»¨æ˜¾ç¤ºï¼‰
            if (mode === 'metro' || mode === 'both') {
                const cc = placeCoords['é•¿æ˜¥'];
                const hb = placeCoords['å“ˆå°”æ»¨'];
                const projMetro = project([cc, hb], cssW, cssH); // è·å–å¤§è‡´ç¼©æ”¾

                // é•¿æ˜¥åœ°é“ç¤ºæ„ ä¸¤ç«™è¿çº¿
                const ccPts = [
                    offset(projMetro[0], -20, 10), // äººæ°‘å¹¿åœº
                    offset(projMetro[0], 30, -15)  // è§£æ”¾å¤§è·¯
                ];
                drawMetro(ctx, ccPts, '#e17055');
                drawMetroStations(ctx, ccPts, ['äººæ°‘å¹¿åœº', 'è§£æ”¾å¤§è·¯']);

                // å“ˆå°”æ»¨åœ°é“ç¤ºæ„ ä¸¤ç«™è¿çº¿
                const hbPts = [
                    offset(projMetro[1], -10, -15), // ä¸­å¤®å¤§è¡—
                    offset(projMetro[1], 25, 5)     // åšç‰©é¦†
                ];
                drawMetro(ctx, hbPts, '#6c5ce7');
                drawMetroStations(ctx, hbPts, ['ä¸­å¤®å¤§è¡—', 'åšç‰©é¦†']);
            }
            // æ®µè·ç¦»ä¸æ—¶é•¿æ ‡æ³¨
            window.__trackLegs = [];
            for (let i = 0; i < trackCities.length - 1; i++) {
                const a = trackCities[i], b = trackCities[i + 1];
                const pa = proj[i], pb = proj[i + 1];
                const mx = (pa[0] + pb[0]) / 2, my = (pa[1] + pb[1]) / 2;
                const key = `${a}-${b}`;
                const dayIdx = legToDay[key];
                const day = tripDays.find(d => d.d === dayIdx);
                const drive = day ? `${day.distance}km / ${day.hours}h` : '';
                const directKm = Math.round(haversine(placeCoords[a], placeCoords[b]));
                ctx.fillStyle = 'rgba(0,0,0,0.6)';
                ctx.fillRect(mx - 44, my - 18, 88, 28);
                ctx.fillStyle = '#fff';
                ctx.font = '12px sans-serif';
                ctx.fillText(`${directKm}km`, mx - 38, my - 2);
                if (drive) ctx.fillText(drive, mx - 38, my + 12);
                window.__trackLegs.push({ a, b, mx, my, idx: i });
            }
        }

        function offset([x, y], dx, dy) { return [x + dx, y + dy]; }

        function drawMetro(ctx, pts, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.setLineDash([6, 4]);
            ctx.beginPath();
            pts.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function drawMetroStations(ctx, pts, names) {
            ctx.fillStyle = '#2d3436';
            ctx.font = '12px sans-serif';
            pts.forEach(([x, y], i) => {
                ctx.beginPath();
                ctx.fillStyle = '#fff';
                ctx.strokeStyle = '#2d3436';
                ctx.lineWidth = 1.5;
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = '#2d3436';
                ctx.fillText(names[i], x + 6, y - 6);
            });
        }

        function focusOn(fromName, toName) {
            renderTrack('car');
            // ç®€æ˜“é«˜äº®ï¼šå†æ¬¡ç»˜åˆ¶è¯¥æ®µä¸ºçº¢è‰²ç²—çº¿
            const canvas = document.getElementById('trackCanvas');
            const ctx = canvas.getContext('2d');
            const cssW = canvas.clientWidth;
            const cssH = canvas.clientHeight;
            const ratio = window.devicePixelRatio || 1;
            ctx.save();
            ctx.scale(1 / ratio, 1 / ratio); // å–æ¶ˆå…ˆå‰scaleå½±å“
            ctx.scale(ratio, ratio);
            const from = placeCoords[fromName];
            const to = placeCoords[toName];
            const path = [from, to];
            const proj = project(path, cssW, cssH);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(proj[0][0], proj[0][1]);
            ctx.lineTo(proj[1][0], proj[1][1]);
            ctx.stroke();
            ctx.restore();
        }

        // åˆ‡æ¢é«˜ç²¾åœ°å½¢å›¾ï¼ˆLeaflet + OpenTopoMapï¼‰
        let leafletInited = false;
        function toggleTopoMap() {
            const ele = document.getElementById('leafletMap');
            const isHidden = ele.style.display === 'none' || ele.style.display === '';
            if (isHidden) {
                ele.style.display = 'block';
                if (!leafletInited) initLeaflet();
            } else {
                ele.style.display = 'none';
            }
        }

        function initLeaflet() {
            leafletInited = true;
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
            script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
            script.crossOrigin = '';
            script.onload = () => {
                const map = L.map('leafletMap', { zoomControl: false }).setView([48.5, 124.0], 4);
                L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                    maxZoom: 17,
                    attribution: 'Map data: Â© OpenStreetMap contributors, SRTM | Map style: Â© OpenTopoMap'
                }).addTo(map);
                L.control.zoom({ position: 'bottomright' }).addTo(map);

                // æ·»åŠ é€”ç»ç‚¹ä¸æ¨èå›¾
                trackCities.forEach(name => {
                    const [lon, lat] = placeCoords[name];
                    const icon = L.circleMarker([lat, lon], { radius: 5, color: '#0984e3' }).addTo(map);
                    const imgs = (poiBest[name]?.imgs) || [];
                    const best = poiBest[name]?.best || '';
                    const html = `<b>${name}</b><br/>${best}<br/>${imgs[0] ? `<img src="${imgs[0]}" style="width:220px;height:120px;object-fit:cover;margin-top:6px;border-radius:6px;"/>` : ''}`;
                    icon.bindPopup(html);
                });

                // ç»˜åˆ¶çº¿è·¯
                const latlngs = trackCities.map(n => {
                    const [lon, lat] = placeCoords[n];
                    return [lat, lon];
                });
                L.polyline(latlngs, { color: '#0984e3', weight: 3 }).addTo(map);
                map.fitBounds(L.polyline(latlngs).getBounds(), { padding: [20, 20] });
            };
            document.body.appendChild(script);
        }

        // è½»é‡è·¯çº¿è§„åˆ’å›¾ï¼ˆCanvasï¼‰ï¼Œæå‡æµç•…åº¦
        let routeMapInited = false;
        function toggleRouteMap() {
            const ele = document.getElementById('routeMap');
            const hidden = ele.style.display === 'none' || ele.style.display === '';
            ele.style.display = hidden ? 'block' : 'none';
            if (hidden && !routeMapInited) {
                routeMapInited = true;
                const c = document.createElement('canvas');
                c.style.width = '100%';
                c.style.height = '480px';
                c.width = 1200; c.height = 480;
                ele.appendChild(c);
                drawLightRoute(c);
            }
        }

        function drawLightRoute(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#f8fafc';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#e5e7eb';
            for (let i = 60; i < canvas.width; i += 60) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height); ctx.stroke(); }
            for (let j = 60; j < canvas.height; j += 60) { ctx.beginPath(); ctx.moveTo(0, j); ctx.lineTo(canvas.width, j); ctx.stroke(); }
            const points = trackCities.map(n => placeCoords[n]);
            const proj = project(points, canvas.width, canvas.height, 40);
            ctx.strokeStyle = '#16a34a';
            ctx.lineWidth = 3;
            ctx.beginPath();
            proj.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
            ctx.stroke();
            ctx.fillStyle = '#111827';
            ctx.font = '14px sans-serif';
            proj.forEach(([x, y], i) => {
                ctx.fillStyle = '#2563eb'; ctx.beginPath(); ctx.arc(x, y, 4, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#111827'; ctx.fillText(trackCities[i], x + 6, y - 6);
            });
        }

        // çƒé¢ç›´çº¿è·ç¦»ï¼ˆåƒç±³ï¼‰
        function haversine([lon1, lat1], [lon2, lat2]) {
            const toRad = d => d * Math.PI / 180;
            const R = 6371; // km
            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            const a = Math.sin(dLat / 2) ** 2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        // è½¨è¿¹æ‚¬æµ®æç¤ºï¼ˆåŸå¸‚/çº¿æ®µï¼‰
        (function attachTrackHover() {
            const canvas = document.getElementById('trackCanvas');
            const tip = document.getElementById('trackTooltip');
            const tTitle = document.getElementById('tooltipTitle');
            const tImg = document.getElementById('tooltipImg');
            const tMeta = document.getElementById('tooltipMeta');

            canvas.addEventListener('mousemove', (e) => {
                if (!window.__trackPoints) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                let shown = false;

                // å‘½ä¸­åŸå¸‚ç‚¹
                for (const p of window.__trackPoints) {
                    const dx = p.x - x, dy = p.y - y;
                    if (dx * dx + dy * dy < 10 * 10) {
                        const imgs = (poiBest[p.name]?.imgs) || [];
                        tTitle.textContent = `${p.name}ï½œæ¨èï¼š${poiBest[p.name]?.best || ''}`;
                        if (imgs[0]) tImg.src = imgs[0];
                        tMeta.textContent = 'æç¤ºï¼šç§»åˆ°çº¿æ®µä¸­ç‚¹æŸ¥çœ‹ç›´çº¿è·ç¦»ä¸è‡ªé©¾æ—¶é•¿';
                        tip.style.left = `${x + 12}px`;
                        tip.style.top = `${y + 12}px`;
                        tip.style.display = 'block';
                        shown = true; break;
                    }
                }

                // å‘½ä¸­çº¿æ®µä¸­ç‚¹çŸ©å½¢åŒºåŸŸ
                if (!shown && window.__trackLegs) {
                    for (const leg of window.__trackLegs) {
                        if (Math.abs(leg.mx - x) < 60 && Math.abs(leg.my - y) < 24) {
                            const key = `${leg.a}-${leg.b}`;
                            const dayIdx = legToDay[key];
                            const day = tripDays.find(d => d.d === dayIdx);
                            const directKm = Math.round(haversine(placeCoords[leg.a], placeCoords[leg.b]));
                            tTitle.textContent = `${leg.a} â†’ ${leg.b}`;
                            tImg.src = (poiBest[leg.b]?.imgs?.[0]) || (poiBest[leg.a]?.imgs?.[0]) || '';
                            tMeta.textContent = `ç›´çº¿ï¼š${directKm}kmï½œè‡ªé©¾ï¼š${day ? day.distance + 'km / ' + day.hours + 'h' : 'â€”'}`;
                            tip.style.left = `${x + 12}px`;
                            tip.style.top = `${y + 12}px`;
                            tip.style.display = 'block';
                            shown = true; break;
                        }
                    }
                }

                if (!shown) { tip.style.display = 'none'; }
            });

            canvas.addEventListener('mouseleave', () => { tip.style.display = 'none'; });
        })();

        // æ·»åŠ é¡µé¢æ»šåŠ¨åŠ¨ç”»
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.attraction-card');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            });

            window.addEventListener('scroll', function () {
                cards.forEach(card => {
                    const cardTop = card.getBoundingClientRect().top;
                    const cardVisible = 150;

                    if (cardTop < window.innerHeight - cardVisible) {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }
                });
            });

            renderDayDetails();
            renderTrack('both');
        });
    </script>
</body>

</html>