<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏úÂåó+Âëº‰º¶Ë¥ùÂ∞î15Â§©Á≤æÂçéÁéØÁ∫øËá™È©æÊ∏∏</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
        }

        .overview-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .route-map {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .route-map h3 {
            color: #2d3436;
            margin-bottom: 15px;
        }

        .route-points {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .route-point {
            background: #74b9ff;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .trip-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .day-title {
            font-size: 1.5rem;
            color: #2d3436;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #74b9ff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .day-number {
            background: #74b9ff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .route-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #74b9ff;
        }

        .route-info h4 {
            color: #2d3436;
            margin-bottom: 8px;
        }

        .route-info p {
            color: #636e72;
            line-height: 1.6;
        }

        .attractions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .attraction-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e9ecef;
        }

        .attraction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .attraction-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        /* ‰∏âÂõæÊãºË¥¥Ê†∑ÂºèÔºåÈÅøÂÖçÂõæÁâáÈ£éÊ†ºÈáçÂ§ç */
        .photo-collage {
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-template-rows: 100px 100px;
            gap: 6px;
            height: 206px;
            padding: 3px;
            background: #f8f9fa;
        }

        .photo-collage img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 6px;
        }

        .photo-collage img.main {
            grid-row: 1 / span 2;
            grid-column: 1 / 2;
        }

        .photo-collage img.side {
            grid-column: 2 / 3;
        }

        .attraction-content {
            padding: 20px;
        }

        .attraction-title {
            font-size: 1.2rem;
            color: #2d3436;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .attraction-description {
            color: #636e72;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .attraction-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #74b9ff;
        }

        .highlights-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .highlight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .highlight-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tips-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .tips-list {
            list-style: none;
            padding: 0;
        }

        .tips-list li {
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tips-list li:before {
            content: "üí°";
            font-size: 1.2rem;
        }

        .tips-list li:last-child {
            border-bottom: none;
        }

        .timeline-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #74b9ff;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #74b9ff;
            border: 3px solid white;
        }

        .timeline-date {
            font-weight: bold;
            color: #74b9ff;
            margin-bottom: 5px;
        }

        .timeline-title {
            font-size: 1.1rem;
            color: #2d3436;
            margin-bottom: 5px;
        }

        .timeline-desc {
            color: #636e72;
            font-size: 0.9rem;
        }

        /* ËØ¶ÊÉÖ‰∏éËΩ®ËøπÊ†∑Âºè */
        .details-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .day-card {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 14px;
        }

        .day-card h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3436;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px 18px;
            margin-top: 10px;
        }

        .info-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.95rem;
            color: #2d3436;
        }

        .info-item b {
            color: #0984e3;
        }

        .cta-row {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .cta-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: #fff;
            border: none;
            padding: 10px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .cta-btn.secondary {
            background: #f8f9fa;
            color: #0984e3;
            border: 1px solid #cde5ff;
        }

        .track-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .track-toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        #trackCanvas {
            width: 100%;
            height: 360px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        #leafletMap,
        #routeMap {
            width: 100%;
            height: 520px;
            border-radius: 12px;
            margin-top: 12px;
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .stats {
                flex-direction: column;
                gap: 15px;
            }

            .attractions-grid {
                grid-template-columns: 1fr;
            }

            .route-points {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>‰∏úÂåó+Âëº‰º¶Ë¥ùÂ∞î15Â§©Á≤æÂçéÁéØÁ∫ø</h1>
            <p>Á©øË∂äÈïøÁôΩÂ±±„ÄÅÂ§ßÂÖ¥ÂÆâÂ≤≠„ÄÅÂëº‰º¶Ë¥ùÂ∞îËçâÂéüÁöÑÂè≤ËØóÁ∫ßËá™È©æ‰πãÊóÖ</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number">15</span>
                    <span>Ë°åÁ®ãÂ§©Êï∞</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">5000</span>
                    <span>ÊÄªÈáåÁ®ã(ÂÖ¨Èáå)</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">20+</span>
                    <span>‰∏ªË¶ÅÊôØÁÇπ</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">5</span>
                    <span>Ê†∏ÂøÉÂå∫Âüü</span>
                </div>
            </div>
        </div>

        <div class="overview-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">üó∫Ô∏è ÁéØÁ∫øË∑ØÁ∫øÊ¶ÇËßàÔºàÈùûÂÆåÂÖ®Èó≠ÁéØÔºåÁªàÁÇπÊµ∑ÊãâÂ∞îÔºâ</h2>
            <div class="route-map">
                <h3>ÈïøÊò• ‚Üí ÈïøÁôΩÂ±± ‚Üí ÂìàÂ∞îÊª® ‚Üí Êº†Ê≤≥ ‚Üí È¢ùÂ∞îÂè§Á∫≥ ‚Üí Êµ∑ÊãâÂ∞î ‚Üí ÈòøÂ∞îÂ±± ‚Üí Êµ∑ÊãâÂ∞î</h3>
                <div class="route-points">
                    <div class="route-point">ÈïøÊò•</div>
                    <div class="route-point">ÈïøÁôΩÂ±±</div>
                    <div class="route-point">ÂìàÂ∞îÊª®</div>
                    <div class="route-point">Êº†Ê≤≥</div>
                    <div class="route-point">È¢ùÂ∞îÂè§Á∫≥</div>
                    <div class="route-point">Êµ∑ÊãâÂ∞î</div>
                    <div class="route-point">ÈòøÂ∞îÂ±±</div>
                    <div class="route-point">Êµ∑ÊãâÂ∞îÔºàÁªàÔºâ</div>
                </div>
            </div>
        </div>

        <div class="timeline-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">üìÖ ËØ¶ÁªÜË°åÁ®ãÊó∂Èó¥Á∫øÔºàÁªàÁÇπÔºöÊµ∑ÊãâÂ∞îÔºâ</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨1-2Â§© (9Êúà25-26Êó•)</div>
                    <div class="timeline-title">ÈïøÊò• ‚Üí ÈïøÁôΩÂ±±</div>
                    <div class="timeline-desc">ÈïøÁôΩÂ±±Â§©Ê±†„ÄÅÁÄëÂ∏É„ÄÅÊ∏©Ê≥âÔºåÁßãÂ≠£Ëâ≤ÂΩ©ÊñëÊñì</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨3-4Â§© (9Êúà27-28Êó•)</div>
                    <div class="timeline-title">ÈïøÁôΩÂ±± ‚Üí ÂìàÂ∞îÊª®</div>
                    <div class="timeline-desc">‰∏≠Â§ÆÂ§ßË°ó„ÄÅÂú£Á¥¢Ëè≤‰∫öÊïôÂ†Ç„ÄÅÂ§™Èò≥Â≤õ</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨5-7Â§© (9Êúà29Êó•-10Êúà1Êó•)</div>
                    <div class="timeline-title">ÂìàÂ∞îÊª® ‚Üí Êº†Ê≤≥</div>
                    <div class="timeline-desc">ÈáëÂ±±ÈπøËãë„ÄÅÁïåÊ±üÈ£éÂÖâ„ÄÅÂåóÊûÅÊùë„ÄÅÈæôÊ±üÁ¨¨‰∏ÄÊπæ</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨8-10Â§© (10Êúà2-4Êó•)</div>
                    <div class="timeline-title">Êº†Ê≤≥ ‚Üí È¢ùÂ∞îÂè§Á∫≥</div>
                    <div class="timeline-desc">Â§ßÂÖ¥ÂÆâÂ≤≠Á©øË∂ä„ÄÅÁôΩÊ°¶Êûó„ÄÅÊπøÂú∞„ÄÅËçâÂéüÈ£éÂÖâ</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨11-13Â§© (10Êúà5-7Êó•)</div>
                    <div class="timeline-title">Êµ∑ÊãâÂ∞î ‚Üí ÈòøÂ∞îÂ±±</div>
                    <div class="timeline-desc">Êª°Ê¥≤ÈáåÂõΩÈó®„ÄÅËæπÂ¢ÉÂÖ¨Ë∑Ø„ÄÅÈòøÂ∞îÂ±±Â§©Ê±†</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Á¨¨14Â§© (10Êúà8Êó•)</div>
                    <div class="timeline-title">ÈòøÂ∞îÂ±± ‚Üí Êµ∑ÊãâÂ∞îÔºàËøîÁ®ãÊõ¥‰æøÊç∑Ôºâ</div>
                    <div class="timeline-desc">ÊôöÁúãËé´Êó•Ê†ºÂãíÊ≤≥Êó•ËêΩÔºåÊµ∑ÊãâÂ∞îÊî∂ÂÆòÔºåÊ¨°Êó•È£ûËøî</div>
                </div>
            </div>
        </div>

        <div class="trip-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">üèîÔ∏è Ê†∏ÂøÉÂå∫ÂüüËØ¶Ëß£</h2>

            <!-- ÈïøÁôΩÂ±±Âå∫Âüü -->
            <div class="day-title">
                <div class="day-number">1</div>
                <span>ÈïøÁôΩÂ±±Âå∫Âüü</span>
            </div>
            <div class="route-info">
                <h4>üèîÔ∏è Âå∫ÂüüÁâπËâ≤</h4>
                <p>ÁßãÂ≠£ÁöÑÈïøÁôΩÂ±±Ëâ≤ÂΩ©ÊñëÊñìÔºåÂ§©Ê±†„ÄÅÁÄëÂ∏É„ÄÅÊ∏©Ê≥âÊûÑÊàêÁªùÁæéÁîªÂç∑„ÄÇÂª∫ËÆÆÊ∏∏ËßàÂåóÂù°ÂíåË•øÂù°Ôºå‰ΩìÈ™å‰∏çÂêåÁöÑËßÜËßí„ÄÇ</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=200&fit=crop"
                        alt="ÈïøÁôΩÂ±±Â§©Ê±†" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">ÈïøÁôΩÂ±±Â§©Ê±†</div>
                        <div class="attraction-description">‰∏≠ÂõΩÊúÄÈ´òÁÅ´Â±±ÊπñÔºåÁßãÂ≠£ÂÄíÊò†ÁùÄ‰∫îÂΩ©ÊñëÊñìÁöÑÂ±±ÊûóÔºåÁæé‰∏çËÉúÊî∂„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç ÈïøÁôΩÂ±±</span>
                            <span>‚è∞ Âª∫ËÆÆ4-5Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?auto=format&w=1200&q=80"
                        alt="ÈïøÁôΩÂ±±ÁÄëÂ∏É" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">ÈïøÁôΩÂ±±ÁÄëÂ∏É</div>
                        <div class="attraction-description">ËêΩÂ∑Æ68Á±≥ÁöÑÂ£ÆËßÇÁÄëÂ∏ÉÔºåÁßãÂ≠£Ê∞¥ÈáèÂÖÖÊ≤õÔºåÊ∞îÂäøÁ£ÖÁ§¥„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç ÈïøÁôΩÂ±±</span>
                            <span>‚è∞ Âª∫ËÆÆ2Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Â§ßÂÖ¥ÂÆâÂ≤≠Âå∫Âüü -->
            <div class="day-title">
                <div class="day-number">2</div>
                <span>Â§ßÂÖ¥ÂÆâÂ≤≠Âå∫Âüü</span>
            </div>
            <div class="route-info">
                <h4>üå≤ Âå∫ÂüüÁâπËâ≤</h4>
                <p>Á©øË∂äÂéüÂßãÊ£ÆÊûóÔºå‰ΩìÈ™å‰∏éÊ¢ÖËä±ÈπøÁöÑ‰∫≤ÂØÜÊé•Ëß¶ÔºåÊ¨£ËµèÁïåÊ±üÈ£éÂÖâÔºåÊÑüÂèóËæπÂ¢ÉÁöÑÁã¨ÁâπÈ≠ÖÂäõ„ÄÇ</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80"
                        alt="ÈáëÂ±±ÈπøËãë" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">ÈáëÂ±±ÈπøËãë</div>
                        <div class="attraction-description">‰∏éÊ¢ÖËä±Èπø‰∫≤ÂØÜÊé•Ëß¶Ôºå‰ΩìÈ™å‰∏éÈπøÁæ§‰∫íÂä®ÁöÑ‰πêË∂£„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç ‰ºäÊò•Â∏Ç</span>
                            <span>‚è∞ Âª∫ËÆÆ2-3Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80"
                        alt="ÂåóÊûÅÊùë" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">ÂåóÊûÅÊùë</div>
                        <div class="attraction-description">ÂØªÊâæ"ÊúÄÂåó‰πãÂÆ∂"Ôºå‰ΩìÈ™åÁ•ñÂõΩÊúÄÂåóÁ´ØÁöÑÁã¨ÁâπÈ≠ÖÂäõ„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç Êº†Ê≤≥Â∏Ç</span>
                            <span>‚è∞ Âª∫ËÆÆ3-4Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Âëº‰º¶Ë¥ùÂ∞îËçâÂéü -->
            <div class="day-title">
                <div class="day-number">3</div>
                <span>Âëº‰º¶Ë¥ùÂ∞îËçâÂéü</span>
            </div>
            <div class="route-info">
                <h4>üåæ Âå∫ÂüüÁâπËâ≤</h4>
                <p>ÂπøË¢§ÁöÑËçâÂéü„ÄÅËúøËúíÁöÑÊ≤≥ÊµÅ„ÄÅÊàêÁæ§ÁöÑÁâõÁæäÔºåÊûÑÊàê‰∫Ü‰∏ÄÂπÖÂ£ÆÁæéÁöÑËçâÂéüÁîªÂç∑„ÄÇ</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80"
                        alt="È¢ùÂ∞îÂè§Á∫≥ÊπøÂú∞" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">È¢ùÂ∞îÂè§Á∫≥ÊπøÂú∞</div>
                        <div class="attraction-description">‰∫öÊ¥≤Á¨¨‰∏ÄÊπøÂú∞ÔºåÁßãÂ≠£Ëâ≤ÂΩ©ÊñëÊñìÔºåÊòØÊëÑÂΩ±Áà±Â•ΩËÄÖÁöÑÂ§©Â†Ç„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç È¢ùÂ∞îÂè§Á∫≥Â∏Ç</span>
                            <span>‚è∞ Âª∫ËÆÆ3-4Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1491555103944-7c647fd857e6?auto=format&w=1200&q=80"
                        alt="Êª°Ê¥≤ÈáåÂõΩÈó®" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">Êª°Ê¥≤ÈáåÂõΩÈó®</div>
                        <div class="attraction-description">‰∏≠‰øÑËæπÂ¢ÉÊ†áÂøóÊÄßÂª∫Á≠ëÔºåÊÑüÂèóËæπÂ¢ÉÂüéÂ∏ÇÁöÑÁã¨ÁâπÈ≠ÖÂäõ„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç Êª°Ê¥≤ÈáåÂ∏Ç</span>
                            <span>‚è∞ Âª∫ËÆÆ2Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÈòøÂ∞îÂ±±ÁÅ´Â±± -->
            <div class="day-title">
                <div class="day-number">4</div>
                <span>ÈòøÂ∞îÂ±±ÁÅ´Â±±</span>
            </div>
            <div class="route-info">
                <h4>üåã Âå∫ÂüüÁâπËâ≤</h4>
                <p>ÁÅ´Â±±Âú∞Ë≤å‰∏éÊ£ÆÊûóÊ∏©Ê≥âÁöÑÂÆåÁæéÁªìÂêàÔºåÁßãÂ≠£ÁöÑÈòøÂ∞îÂ±±Ëâ≤ÂΩ©‰∏∞ÂØåÔºåÊòØÊëÑÂΩ±Âíå‰ºëÈó≤ÁöÑÁªù‰Ω≥ÂéªÂ§Ñ„ÄÇ</p>
            </div>
            <div class="attractions-grid">
                <div class="attraction-card">
                    <img src="https://images.unsplash.com/photo-1502786129293-79981df4e689?auto=format&w=1200&q=80"
                        alt="ÈòøÂ∞îÂ±±Â§©Ê±†" class="attraction-image">
                    <div class="attraction-content">
                        <div class="attraction-title">ÈòøÂ∞îÂ±±Â§©Ê±†</div>
                        <div class="attraction-description">ÁÅ´Â±±Âè£ÊπñÔºåÁßãÂ≠£ÂÄíÊò†ÁùÄ‰∫îÂΩ©ÊñëÊñìÁöÑÂ±±ÊûóÔºåÁæé‰∏çËÉúÊî∂„ÄÇ</div>
                        <div class="attraction-details">
                            <span>üìç ÈòøÂ∞îÂ±±Â∏Ç</span>
                            <span>‚è∞ Âª∫ËÆÆ3-4Â∞èÊó∂</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="highlights-section">
            <h2 style="color: #2d3436; margin-bottom: 30px; text-align: center;">üåü Ë°åÁ®ã‰∫ÆÁÇπ</h2>
            <div class="highlights-grid">
                <div class="highlight-card">
                    <div class="highlight-icon">üèîÔ∏è</div>
                    <h3>ÈïøÁôΩÂ±±Â§©Ê±†</h3>
                    <p>ÁßãÂ≠£Ëâ≤ÂΩ©ÊñëÊñì</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">ü¶å</div>
                    <h3>ÈáëÂ±±ÈπøËãë</h3>
                    <p>‰∏éÊ¢ÖËä±Èπø‰∫≤ÂØÜÊé•Ëß¶</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">üìç</div>
                    <h3>ÂåóÊûÅÊùë</h3>
                    <p>Á•ñÂõΩÊúÄÂåóÂùêÊ†á</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">üåæ</div>
                    <h3>Âëº‰º¶Ë¥ùÂ∞îËçâÂéü</h3>
                    <p>ÂπøË¢§ËçâÂéüÈ£éÂÖâ</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">üåã</div>
                    <h3>ÈòøÂ∞îÂ±±ÁÅ´Â±±</h3>
                    <p>ÁÅ´Â±±Âú∞Ë≤åÂ•áËßÇ</p>
                </div>
                <div class="highlight-card">
                    <div class="highlight-icon">üèõÔ∏è</div>
                    <h3>Êª°Ê¥≤ÈáåÂõΩÈó®</h3>
                    <p>ËæπÂ¢ÉÈ£éÊÉÖ‰ΩìÈ™å</p>
                </div>
            </div>
        </div>

        <!-- Ë°åÁ®ãÁªÜËäÇ / ‰∫§ÈÄö / ‰ΩèÂÆø -->
        <div class="details-section">
            <h2 style="color: #2d3436; margin-bottom: 18px; text-align: center;">üß≠ ÊØèÊó•Ë°åÁ®ãÁªÜËäÇ ¬∑ ‰∫§ÈÄö ¬∑ ‰ΩèÂÆø</h2>
            <div id="dayDetails"></div>
        </div>

        <!-- ËΩ®ËøπÂõæ -->
        <div class="track-section">
            <h2 style="color: #2d3436; margin-bottom: 12px; text-align: center;">üìç ÊóÖÊ∏∏ËΩ®ËøπÂõæÔºàÂê´ÂüéÂ∏ÇÂú∞ÈìÅÁ§∫ÊÑèÔºâ</h2>
            <div class="track-toolbar">
                <button class="cta-btn" onclick="renderTrack('car')">ÊòæÁ§∫È©æËΩ¶ËΩ®Ëøπ</button>
                <button class="cta-btn secondary" onclick="renderTrack('metro')">ÊòæÁ§∫Âú∞ÈìÅÁ§∫ÊÑè</button>
                <button class="cta-btn secondary" onclick="renderTrack('both')">ÂêåÊó∂ÊòæÁ§∫</button>
                <button class="cta-btn" onclick="toggleRouteMap()">Ë∑ØÁ∫øËßÑÂàíÂõæ</button>
                <button class="cta-btn" onclick="toggleTopoMap()">È£éÊôØÂú∞ÂΩ¢Âõæ</button>
            </div>
            <div style="position: relative;">
                <canvas id="trackCanvas"></canvas>
                <div id="trackTooltip"
                    style="position:absolute; display:none; pointer-events:none; background:#ffffff; border:1px solid #e9ecef; border-radius:8px; padding:10px; box-shadow:0 8px 20px rgba(0,0,0,0.12); max-width:260px;">
                    <div id="tooltipTitle" style="font-weight:600; color:#2d3436; margin-bottom:6px; font-size:13px;">
                    </div>
                    <img id="tooltipImg" src="" alt=""
                        style="width:100%; height:140px; object-fit:cover; border-radius:6px; margin-bottom:6px;" />
                    <div id="tooltipMeta" style="font-size:12px; color:#636e72;"></div>
                </div>
            </div>
            <div id="routeMap"></div>
            <div id="leafletMap"></div>
        </div>

        <div class="tips-section">
            <h2 style="color: #2d3436; margin-bottom: 30px;">üí° ÂÆûÁî®Ë¥¥Â£´</h2>
            <ul class="tips-list">
                <li>Âª∫ËÆÆ9Êúà25Êó•-10Êúà9Êó•Âá∫Ë°åÔºåÈÅøÂºÄÂçÅ‰∏ÄÈ´òÂ≥∞ÔºåÁßãËâ≤ÊúÄÁæé</li>
                <li>Âª∫ËÆÆ4-6‰∫∫ÊãºËΩ¶ÔºåË¥πÁî®AAÔºåË∂äÈáéËΩ¶‰ºòÂÖà</li>
                <li>ËæπÂ¢ÉÂÖ¨Ë∑ØÈÉ®ÂàÜË∑ØÊÆµÊó†‰ø°Âè∑ÔºåÊèêÂâç‰∏ãËΩΩÁ¶ªÁ∫øÂú∞Âõæ</li>
                <li>Â•á‰πæÈúÄÂäûÁêÜ„ÄäÈò≤ÁÅ´ËØÅ„ÄãÔºåÊâæÂΩìÂú∞ÂêëÂØºÂçèÂä©</li>
                <li>ÈòøÂ∞îÂ±±Èó®Á•®48Â∞èÊó∂ÊúâÊïàÔºå‰ΩèÊôØÂå∫ÂÜÖÁúÅÊó∂ÁúÅÈí±</li>
                <li>ËçâÂéüÊòºÂ§úÊ∏©Â∑ÆÂ§ßÔºå9ÊúàÂ∫ï‰πüÈúÄÂ∏¶ÂÜ≤ÈîãË°£</li>
                <li>ÂåÖËΩ¶ÈÄâÊú¨Âú∞Âè∏Êú∫ÔºåÁÜüÊÇâË∑ØÂÜµÂíåÂΩìÂú∞ÊÉÖÂÜµ</li>
                <li>ÊèêÂâçÈ¢ÑËÆ¢‰ΩèÂÆøÔºåÁâπÂà´ÊòØÂ•á‰πæ„ÄÅÈòøÂ∞îÂ±±Á≠âÁÉ≠Èó®Âú∞</li>
                <li>ÂáÜÂ§áÁé∞ÈáëÂíåÁßªÂä®ÊîØ‰ªòÂ∑•ÂÖ∑</li>
                <li>Ê≥®ÊÑèËæπÂ¢ÉÂú∞Âå∫ÁöÑÁâπÊÆäËßÑÂÆöÂíåËØÅ‰ª∂Ë¶ÅÊ±Ç</li>
            </ul>
        </div>
    </div>

    <script>
        // Ë°åÁ®ãÊï∞ÊçÆ‰∏éÂùêÊ†á
        const placeCoords = {
            "ÈïøÊò•": [125.3235, 43.8171],
            "ÈïøÁôΩÂ±±": [128.08, 42.05],
            "ÂìàÂ∞îÊª®": [126.534967, 45.803775],
            "‰ºäÊò•": [128.899396, 47.727272],
            "ÈªëÊ≤≥": [127.499023, 50.245234],
            "ÂåóÊûÅÊùë": [122.365234, 53.558654],
            "Ê†πÊ≤≥": [121.516, 50.783],
            "È¢ùÂ∞îÂè§Á∫≥": [120.182, 50.243],
            "Êµ∑ÊãâÂ∞î": [119.736, 49.213],
            "Êª°Ê¥≤Èáå": [117.458, 49.588],
            "ÈòøÂ∞îÂ±±": [119.943, 47.177],
            "ÁôΩÂüé": [122.839, 45.619]
        };

        const tripDays = [
            {
                d: 1, title: "ÈïøÊò• ‚Üí ‰∫åÈÅìÁôΩÊ≤≥ÔºàÈïøÁôΩÂ±±ÈïáÔºâ", start: "ÈïøÊò•", end: "ÈïøÁôΩÂ±±", distance: 350, hours: 5.5,
                plan: ["ÊäµËææÈïøÊò•ÂèñËΩ¶/Ê£ÄËΩ¶", "ÂçàÂêéÂá∫ÂèëÔºå‰∏äÈïøÂêâÈ´òÈÄü‚ÄîÊäöÈïøÈ´òÈÄü", "ÊôöÊäµ‰∫åÈÅìÁôΩÊ≤≥ÂäûÁêÜÂÖ•‰Ωè"],
                cityMetro: "ÈïøÊò•Âú∞ÈìÅÔºöÂ¶ÇÂ∏ÇÂå∫ÂèñËΩ¶ÂèØ‰πòÂú∞ÈìÅ1/2Âè∑Á∫øËá≥ËøëÁ´ôÔºà‰∫∫Ê∞ëÂπøÂú∫/Ëß£ÊîæÂ§ßË∑ØÔºâÂêéÊ≠•Ë°åÂèñËΩ¶",
                alt: "ÂÖ¨ÂÖ±‰∫§ÈÄöÔºöÈïøÊò•‚ÜíÁôΩÊ≤≥È´òÈìÅÔºà2.5hÔºâÔºåÁôΩÊ≤≥Á´ôÊãºËΩ¶/ÊâìËΩ¶Ëá≥ÈÖíÂ∫ó",
                stay: "‰∫åÈÅìÁôΩÊ≤≥ÈïáÂÜÖÊ∏©Ê≥âÈÖíÂ∫óÔºàÂª∫ËÆÆÔºöÂ∏åÂ∞îÈ°øÊ¨¢Êúã/‰∏áËææÂ∞èÈïáÊ∞ëÂÆøÔºâ"
            },
            {
                d: 2, title: "ÈïøÁôΩÂ±±‰∏ÄÊó•ÔºàÂåóÂù°/Ë•øÂù°Ôºâ", start: "ÈïøÁôΩÂ±±", end: "ÈïøÁôΩÂ±±", distance: 60, hours: 2,
                plan: ["Êó©ÂÖ•Âõ≠‰πòÁéØ‰øùËΩ¶‰∏äÂ±±", "Â§©Ê±†‚ÄîÁÄëÂ∏É‚ÄîÊ∏©Ê≥âÁæ§‚ÄîË∞∑Â∫ïÊ£ÆÊûóÔºàÂåóÂù°Ôºâ", "Ëã•‰ΩìÂäõÂÖÅËÆ∏‰∏ãÂçàËµ∞Ë•øÂù°Âè∞Èò∂ËßÇÊôØ"],
                cityMetro: "‚Äî",
                alt: "Âõ≠Âå∫ÁéØ‰øùËΩ¶Âæ™ÁéØÔºåÂõ≠ÂÜÖ‰∫§ÈÄö‰æøÂà©",
                stay: "‰∫åÈÅìÁôΩÊ≤≥ÂêåÂâç‰∏ÄÊôö"
            },
            {
                d: 3, title: "ÈïøÁôΩÂ±± ‚Üí ÂìàÂ∞îÊª®ÔºàÂ∏ÇÂå∫Ê∏∏Ôºâ", start: "ÈïøÁôΩÂ±±", end: "ÂìàÂ∞îÊª®", distance: 520, hours: 7,
                plan: ["Êó©È§êÂêéÂá∫ÂèëÔºåÁªèÈπ§Â§ß/G11Ëá≥ÂìàÂ∞îÊª®", "ÊôöÈó¥‰∏≠Â§ÆÂ§ßË°óÊ≠•Ë°å„ÄÅÁ¥¢Ëè≤‰∫öÊïôÂ†ÇÂ§úÊôØ"],
                cityMetro: "ÂìàÂ∞îÊª®Âú∞ÈìÅ2Âè∑Á∫øÔºö‰∏≠Â§ÆÂ§ßË°óÁ´ôÔºõ1Âè∑Á∫øÔºöÂçöÁâ©È¶Ü/ÈìÅË∑ØÂ±ÄÁ´ô‰æøÊç∑Êç¢‰πò",
                alt: "ÂÖ¨ÂÖ±‰∫§ÈÄöÔºöÂª∂Âêâ/ÁôΩÊ≤≥‚ÜíÂìàÂ∞îÊª®Ëà™Áè≠ÊàñÈ´òÈìÅÔºàËßÜÁè≠Ê¨°Ôºâ",
                stay: "‰∏≠Â§ÆÂ§ßË°ó/ÈÅìÈáåÂå∫ÈÖíÂ∫óÔºàÂª∫ËÆÆÔºö‰∏áËææÊñáÂçé/È¶ôÊ†ºÈáåÊãâ/Ëã±Ëø™Ê†ºÔºâ"
            },
            {
                d: 4, title: "ÂìàÂ∞îÊª® ‚Üí ‰ºäÊò•ÔºàÈáëÂ±±ÈπøËãëÔºâ", start: "ÂìàÂ∞îÊª®", end: "‰ºäÊò•", distance: 330, hours: 4.5,
                plan: ["‰∏äÂçàÂìàÂ∞îÊª®Â§™Èò≥Â≤õÂÖ¨Âõ≠", "ÂçàÂêéÈ©±ËΩ¶ÂâçÂæÄ‰ºäÊò•ÔºåÂ§ïÈò≥Êé¢ËÆøÈáëÂ±±ÈπøËãë"],
                cityMetro: "ÂìàÂ∞îÊª®Âú∞ÈìÅ1/2Âè∑Á∫øÂ∏ÇÂÜÖÈÄöÂã§ÔºåÈöèÂêéËá™È©æÁ¶ªÂüé",
                alt: "ÂìàÂ∞îÊª®‚Üí‰ºäÊò•ÂèØÈÄâKÂ≠óÂàóËΩ¶ÔºàÊÖ¢ÔºâÔºåÂª∫ËÆÆËá™È©æ",
                stay: "‰ºäÊò•Â∏ÇÂå∫/Ê±§Êó∫Ê≤≥ÊôØÂå∫ÂÜÖÊ∞ëÂÆø"
            },
            {
                d: 5, title: "‰ºäÊò• ‚Üí ÈªëÊ≤≥ÔºàÁïåÊ±üÈ£éÂÖâÔºâ", start: "‰ºäÊò•", end: "ÈªëÊ≤≥", distance: 500, hours: 6.5,
                plan: ["Ê≤øG331Âåó‰∏äÔºåÈÄî‰∏≠Ê£ÆÊûóÂÖ¨Ë∑ØËßÇÊôØ", "ÂÇçÊôöÊäµÈªëÊ≤≥Âè£Â≤∏ÔºåÂ§úËßÇÂØπÂ≤∏Â∏ÉÂ∏ÇÁÅØÁÅ´"],
                cityMetro: "‚Äî",
                alt: "‰ºäÊò•‚ÜíÈªëÊ≤≥Êó†Áõ¥ËææÈ´òÈìÅÔºåÁè≠ËΩ¶ËÄóÊó∂Èïø",
                stay: "ÈªëÊ≤≥Âè£Â≤∏Âë®ËæπÈÖíÂ∫óÔºàÂª∫ËÆÆÔºöÈî¶Ê±ü/ÂÖ®Â≠£Ôºâ"
            },
            {
                d: 6, title: "ÈªëÊ≤≥ ‚Üí ÂåóÊûÅÊùëÔºàÈæôÊ±üÁ¨¨‰∏ÄÊπæ/ÁôΩÊ°¶ÊûóÔºâ", start: "ÈªëÊ≤≥", end: "ÂåóÊûÅÊùë", distance: 620, hours: 9,
                plan: ["Ê∏ÖÊô®Âá∫ÂèëÊ≤øÁïåÊ±üÂâçË°åÔºåÊâìÂç°ÁôΩÊ°¶Êûó", "‰∏ãÂçàÈæôÊ±üÁ¨¨‰∏ÄÊπæ‰øØÁû∞Œ©Â§ßÂºØ", "ÂÇçÊôöÊäµÂåóÊûÅÊùëÊâæ‚ÄúÊúÄÂåó‚ÄùÂú∞Ê†á"],
                cityMetro: "‚Äî",
                alt: "Ê≤øÁïåÊ±üÂõΩÈÅì‰∏∫‰∏ªÔºåÊ≥®ÊÑèË°•Áªô",
                stay: "ÂåóÊûÅÊùëÂÆ¢Ê†àÔºàÂª∫ËÆÆÔºöÊúÄÂåó‰∏ÄÂÆ∂/ÂåóÊûÅÊòüÂÆ¢Ê†àÔºâ"
            },
            {
                d: 7, title: "ÂåóÊûÅÊùëÔºàÊûÅÂú∞ÊÖ¢Ê∏∏Ôºâ", start: "ÂåóÊûÅÊùë", end: "ÂåóÊûÅÊùë", distance: 40, hours: 1,
                plan: ["ÊùëÂÜÖÊ≠•Ë°å/Áü≠ÈÄîËá™È©æÔºöÁ•ûÂ∑ûÂåóÊûÅÂπøÂú∫„ÄÅÂåóÊûÅÂì®ÊâÄ", "ÊãçÊëÑÊó•ËêΩ‰∏éÊòüÁ©∫"],
                cityMetro: "‚Äî",
                alt: "ÊôØÂå∫ÂÜÖËßÇÂÖâÂ∞èÂ∑¥/Ê≠•Ë°å‰∏∫‰∏ª",
                stay: "ÂåóÊûÅÊùëÂÆ¢Ê†àÂêåÂâç"
            },
            {
                d: 8, title: "ÂåóÊûÅÊùë ‚Üí Ê†πÊ≤≥ÔºàÁ©øË∂äÂ§ßÂÖ¥ÂÆâÂ≤≠Ôºâ", start: "ÂåóÊûÅÊùë", end: "Ê†πÊ≤≥", distance: 650, hours: 9.5,
                plan: ["Êó©Âá∫ÂèëÔºåÁªèÂ°îÊ≤≥/Âëº‰∏≠ËΩ¨ÂêëÂÜÖËíôÂè§", "ÈÄîÁªèÂÜ∑ÊûÅÊùëÁïôÂΩ±"],
                cityMetro: "‚Äî",
                alt: "Ë∑ØÁ®ãÈïøÔºåÊ≥®ÊÑèÊ≤πÈáè‰∏é‰ºëÊÅØÁÇπ",
                stay: "Ê†πÊ≤≥Â∏ÇÂå∫ÂïÜÂä°ÈÖíÂ∫ó/Ê∞ëÂÆø"
            },
            {
                d: 9, title: "Ê†πÊ≤≥ ‚Üí È¢ùÂ∞îÂè§Á∫≥ÔºàÊπøÂú∞/ÁôΩÊ°¶ÊûóÔºâ", start: "Ê†πÊ≤≥", end: "È¢ùÂ∞îÂè§Á∫≥", distance: 270, hours: 4,
                plan: ["‰∏äÂçàÊïñÈ≤ÅÂè§ÈõÖ‰ΩøÈπøÈÉ®ËêΩÔºàÂèØÈÄâÔºâ", "ÂçàÂêéÈ¢ùÂ∞îÂè§Á∫≥ÊπøÂú∞ÁôªÈ´ò‰øØÁû∞"],
                cityMetro: "‚Äî",
                alt: "ÂΩìÂú∞ÂåÖËΩ¶/ÁΩëÁ∫¶ËΩ¶ÂèØËææ‰∏ªË¶ÅÊôØÁÇπ",
                stay: "È¢ùÂ∞îÂè§Á∫≥Â∏ÇÂå∫/Ê†πÊ≤≥ÊπøÂú∞ÊôØÂå∫Âë®ËæπÊ∞ëÂÆø"
            },
            {
                d: 10, title: "È¢ùÂ∞îÂè§Á∫≥ ‚Üí Êµ∑ÊãâÂ∞îÔºàËçâÂéüÂÖ¨Ë∑ØÔºâ", start: "È¢ùÂ∞îÂè§Á∫≥", end: "Êµ∑ÊãâÂ∞î", distance: 180, hours: 3,
                plan: ["Ê≤øËçâÂéüÂÖ¨Ë∑ØÂâçÂæÄÊµ∑ÊãâÂ∞î", "ÈÄî‰∏≠ÂèØÁªïË°åÁôΩÊ°¶ÊûóÂ§ßÈÅì/Ëé´Êó•Ê†ºÂãíÊ≤≥"],
                cityMetro: "‚Äî",
                alt: "Êµ∑ÊãâÂ∞îÂ∏ÇÂÜÖÊâìËΩ¶Êñπ‰æø",
                stay: "Êµ∑ÊãâÂ∞îÂ∏Ç‰∏≠ÂøÉÈÖíÂ∫óÔºàÂª∫ËÆÆÔºö‰∏áËææÂòâÂçé/ÂáØÊÇ¶ÂòâËΩ©Ôºâ"
            },
            {
                d: 11, title: "Êµ∑ÊãâÂ∞î ‚Üí Êª°Ê¥≤ÈáåÔºàÂõΩÈó®/Â•óÂ®ÉÂπøÂú∫Ôºâ", start: "Êµ∑ÊãâÂ∞î", end: "Êª°Ê¥≤Èáå", distance: 190, hours: 2.5,
                plan: ["‰∏äÂçàÊµ∑ÊãâÂ∞îÂ∏ÇÂå∫Ë°•Áªô", "ÂçàÂêéÊª°Ê¥≤ÈáåÂõΩÈó®‰∏éÂ•óÂ®ÉÂπøÂú∫Â§úÊôØ"],
                cityMetro: "‚Äî",
                alt: "‰∏§ÂüéÈó¥È´òÈÄüË∑ØÂÜµËâØÂ•Ω",
                stay: "Êª°Ê¥≤ÈáåËæπÂ¢ÉÈ£éÊÉÖÈÖíÂ∫óÔºàÂª∫ËÆÆÔºöÂáØÊÇ¶/ÂõΩÈó®ÊôØËßÇÊàøÔºâ"
            },
            {
                d: 12, title: "Êª°Ê¥≤Èáå ‚Üí ÈòøÂ∞îÂ±±ÔºàÊûóÊµ∑/ÁÅ´Â±±Ôºâ", start: "Êª°Ê¥≤Èáå", end: "ÈòøÂ∞îÂ±±", distance: 360, hours: 5.5,
                plan: ["Á©øË°åÊûóÊµ∑Ôºå‰∏ãÂçàÊäµÈòøÂ∞îÂ±±Â∞èÈïá", "ÊôöÊ≥°Ê∏©Ê≥â"],
                cityMetro: "‚Äî",
                alt: "Ê≤øÁúÅÈÅì‰∏∫‰∏ªÔºåÊ≥®ÊÑèÈôêÈÄü",
                stay: "ÈòøÂ∞îÂ±±Ê∏©Ê≥âÈÖíÂ∫ó/ÂÖ¨Âõ≠Âë®ËæπÊ∞ëÂÆø"
            },
            {
                d: 13, title: "ÈòøÂ∞îÂ±±ÂõΩÂÆ∂Ê£ÆÊûóÂÖ¨Âõ≠‰∏ÄÊó•", start: "ÈòøÂ∞îÂ±±", end: "ÈòøÂ∞îÂ±±", distance: 80, hours: 2,
                plan: ["Â§©Ê±†‚ÄîÁü≥Â°òÊûó‚Äî‰∏âÊΩ≠Â≥°ÁéØÁ∫ø", "ÈÄÇÂΩìÂæíÊ≠•ÊãçÊëÑÁßãËâ≤"],
                cityMetro: "‚Äî",
                alt: "ÊôØÂå∫ÁéØ‰øùËΩ¶/Ëá™È©æÁªìÂêàÔºå48Â∞èÊó∂Èó®Á•®ÂèØÈáçÂ§çÂÖ•Âõ≠",
                stay: "ÈòøÂ∞îÂ±±ÂêåÂâç"
            },
            {
                d: 14, title: "ÈòøÂ∞îÂ±± ‚Üí Êµ∑ÊãâÂ∞îÔºàÊî∂ÂÆòÔºåÈ£ûËøî‰∏äÊµ∑Ôºâ", start: "ÈòøÂ∞îÂ±±", end: "Êµ∑ÊãâÂ∞î", distance: 270, hours: 3.5,
                plan: ["‰∏äÂçàÈòøÂ∞îÂ±±Â§©Ê±†/Áü≥Â°òÊûóË°•ÊºèÊãç", "ÂçàÂêéÁªè‰πåÂÖ∞Êµ©ÁâπÊñπÂêëÊàñS203Âåó‰∏äËá≥Êµ∑ÊãâÂ∞î", "ÂÇçÊôöËé´Êó•Ê†ºÂãíÊ≤≥ËßÇÊó•ËêΩÊî∂ÂÆò"],
                cityMetro: "‚Äî",
                alt: "Â¶ÇÈÅáÂ†µËΩ¶ÂèØÁªèXÁ∫øËµ∞Âëº‰º¶Êπñ‰∏úÂ≤∏ÂÖ•Âüé",
                stay: "Êµ∑ÊãâÂ∞îÂ∏Ç‰∏≠ÂøÉ/Êú∫Âú∫Âë®ËæπÈÖíÂ∫óÔºàÊ¨°Êó•È£ûËøîÊõ¥‰æøÊç∑Ôºâ",
                flightLinks: [
                    { label: "Êµ∑ÊãâÂ∞î(HLD) ‚Üí ‰∏äÊµ∑ËôπÊ°•(SHA) Ëà™Áè≠", url: "https://flights.ctrip.com/itinerary/oneway-HLD-SHA" },
                    { label: "Êµ∑ÊãâÂ∞î(HLD) ‚Üí ‰∏äÊµ∑Êµ¶‰∏ú(PVG) Ëà™Áè≠", url: "https://flights.ctrip.com/itinerary/oneway-HLD-PVG" }
                ]
            }
        ];

        function amapNavLink(fromName, toName) {
            const from = placeCoords[fromName];
            const to = placeCoords[toName];
            if (!from || !to) return '#';
            const fromStr = `${from[0]},${from[1]},${encodeURIComponent(fromName)}`;
            const toStr = `${to[0]},${to[1]},${encodeURIComponent(toName)}`;
            return `https://uri.amap.com/navigation?from=${fromStr}&to=${toStr}&mode=car&policy=1`;
        }

        function renderDayDetails() {
            const wrap = document.getElementById('dayDetails');
            wrap.innerHTML = '';
            tripDays.forEach(day => {
                const div = document.createElement('div');
                div.className = 'day-card';
                const navUrl = amapNavLink(day.start, day.end);
                const flightHtml = (day.flightLinks && day.flightLinks.length)
                    ? `<div class="cta-row">${day.flightLinks.map(f => `<a class=\"cta-btn secondary\" href=\"${f.url}\" target=\"_blank\" rel=\"noopener\">‚úàÔ∏è ${f.label}</a>`).join('')}</div>`
                    : '';
                div.innerHTML = `
                    <h3>Á¨¨${day.d}Â§©ÔΩú${day.title}</h3>
                    <div class="info-grid">
                        <div class="info-item"><b>Êó∂Èó¥ÂÆâÊéí</b><br>${day.plan.join('Ôºõ')}</div>
                        <div class="info-item"><b>Ëá™È©æ‰∫§ÈÄö</b><br>Á∫¶${day.distance}km ¬∑ È¢Ñ‰º∞${day.hours}Â∞èÊó∂</div>
                        <div class="info-item"><b>ÂÖ¨ÂÖ±‰∫§ÈÄö</b><br>${day.alt}</div>
                        <div class="info-item"><b>ÂüéÂ∏ÇÂú∞ÈìÅ/Â∏ÇÂÜÖ‰∫§ÈÄö</b><br>${day.cityMetro}</div>
                        <div class="info-item"><b>‰ΩèÂÆøÂª∫ËÆÆ</b><br>${day.stay}</div>
                    </div>
                    <div class="cta-row">
                        <a class="cta-btn" href="${navUrl}" target="_blank" rel="noopener">üìç ‰∏ÄÈîÆÂØºËà™ÔºàÈ´òÂæ∑Ôºâ</a>
                        <button class="cta-btn secondary" onclick="focusOn('${day.start}','${day.end}')">Âú®ËΩ®ËøπÂõæ‰∏≠È´ò‰∫ÆÊú¨Êó•</button>
                    </div>
                    ${flightHtml}
                `;
                wrap.appendChild(div);
            });
        }

        // ËΩ®ËøπÂõæÊ∏≤Êüì
        // Êîπ‰∏∫ÈùûÂÆåÂÖ®Èó≠ÁéØÔºöÁªàÁÇπÊµ∑ÊãâÂ∞îÔºàÊõ¥‰æø‰∫éËøîÁ®ã/È£ûÂõûÔºâ
        const trackCities = ["ÈïøÊò•", "ÈïøÁôΩÂ±±", "ÂìàÂ∞îÊª®", "‰ºäÊò•", "ÈªëÊ≤≥", "ÂåóÊûÅÊùë", "Ê†πÊ≤≥", "È¢ùÂ∞îÂè§Á∫≥", "Êµ∑ÊãâÂ∞î", "Êª°Ê¥≤Èáå", "ÈòøÂ∞îÂ±±", "Êµ∑ÊãâÂ∞î"];

        // ÂüéÂ∏Ç-Â§©Êò†Â∞ÑÔºàÁî®‰∫éÊÆµË∑ù/Êó∂ÈïøÊ†áÊ≥®Ôºâ
        const legToDay = {
            "ÈïøÊò•-ÈïøÁôΩÂ±±": 1,
            "ÈïøÁôΩÂ±±-ÂìàÂ∞îÊª®": 3,
            "ÂìàÂ∞îÊª®-‰ºäÊò•": 4,
            "‰ºäÊò•-ÈªëÊ≤≥": 5,
            "ÈªëÊ≤≥-ÂåóÊûÅÊùë": 6,
            "ÂåóÊûÅÊùë-Ê†πÊ≤≥": 8,
            "Ê†πÊ≤≥-È¢ùÂ∞îÂè§Á∫≥": 9,
            "È¢ùÂ∞îÂè§Á∫≥-Êµ∑ÊãâÂ∞î": 10,
            "Êµ∑ÊãâÂ∞î-Êª°Ê¥≤Èáå": 11,
            "Êª°Ê¥≤Èáå-ÈòøÂ∞îÂ±±": 12,
            "ÈòøÂ∞îÂ±±-Êµ∑ÊãâÂ∞î": 14
        };

        // ÊØèÂüéÁ≤æÈÄâÂõæÁâáÔºà1-3Âº†ÔºåÈÅøÂÖçÈáçÂ§çÈ£éÊ†ºÔºâ
        const poiBest = {
            "ÈïøÊò•": {
                best: "ÂáÄÊúàÊΩ≠/ÂçóÊπñÁßãËâ≤", imgs: [
                    "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&w=1200&q=80"
                ]
            },
            "ÈïøÁôΩÂ±±": {
                best: "Â§©Ê±†/ÁÄëÂ∏É/Ê∏©Ê≥âÁæ§", imgs: [
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1508614999368-9260051291ea?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&w=1200&q=80"
                ]
            },
            "ÂìàÂ∞îÊª®": {
                best: "ÊùæËä±Ê±ü/Â§™Èò≥Â≤õÁßãËâ≤", imgs: [
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80"
                ]
            },
            "‰ºäÊò•": {
                best: "ÈáëÂ±±ÈπøËãë/ÁôΩÊ°¶Êûó", imgs: [
                    "https://images.unsplash.com/photo-1501706362039-c6b2a034f1f0?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1474511320723-9a56873867b5?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1501004318641-b39e6451bec6?auto=format&w=1200&q=80"
                ]
            },
            "ÈªëÊ≤≥": {
                best: "ÁïåÊ±üËêΩÊó•/Âè£Â≤∏Â§úÊôØ", imgs: [
                    "https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&w=1200&q=80"
                ]
            },
            "ÂåóÊûÅÊùë": {
                best: "ÁôΩÊ°¶Êûó/ÈæôÊ±üÁ¨¨‰∏ÄÊπæ/ÊúÄÂåóÂú∞Ê†á", imgs: [
                    "https://images.unsplash.com/photo-1533553493349-0f36c98a1a5d?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&w=1200&q=80"
                ]
            },
            "Ê†πÊ≤≥": {
                best: "ÊïñÈ≤ÅÂè§ÈõÖ‰ΩøÈπøÈÉ®ËêΩ/ÂÜ∑ÊûÅÊùë", imgs: [
                    "https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1491555103944-7c647fd857e6?auto=format&w=1200&q=80"
                ]
            },
            "È¢ùÂ∞îÂè§Á∫≥": {
                best: "È¢ùÂ∞îÂè§Á∫≥ÊπøÂú∞/Ê≤≥ÊµÅÂºØÊõ≤", imgs: [
                    "https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&w=1200&q=80"
                ]
            },
            "Êµ∑ÊãâÂ∞î": {
                best: "Ëé´Êó•Ê†ºÂãíÊ≤≥/ËçâÂéüÊó•ËêΩ", imgs: [
                    "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&w=1200&q=80"
                ]
            },
            "Êª°Ê¥≤Èáå": {
                best: "Âëº‰º¶Êπñ/ËçâÂéüËæπÂ¢ÉÁ∫ø", imgs: [
                    "https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&w=1200&q=80"
                ]
            },
            "ÈòøÂ∞îÂ±±": {
                best: "Â§©Ê±†/Áü≥Â°òÊûó/ÁÅ´Â±±Âú∞Ë≤å", imgs: [
                    "https://images.unsplash.com/photo-1502786129293-79981df4e689?auto=format&w=1200&q=80",
                    "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&w=1200&q=80"
                ]
            },
            "ÁôΩÂüé": {
                best: "ÂêëÊµ∑ÊπøÂú∞/Ëä¶ËãáÁßãËâ≤", imgs: [
                    "https://images.unsplash.com/photo-1526481280698-8fcc13fd1e50?auto=format&w=1200&q=80"
                ]
            }
        };

        function project(points, w, h, padding = 30) {
            const xs = points.map(p => p[0]);
            const ys = points.map(p => p[1]);
            const minX = Math.min(...xs), maxX = Math.max(...xs);
            const minY = Math.min(...ys), maxY = Math.max(...ys);
            const sx = (w - 2 * padding) / (maxX - minX);
            const sy = (h - 2 * padding) / (maxY - minY);
            return points.map(([x, y]) => [
                padding + (x - minX) * sx,
                // ÂèçËΩ¨YËΩ¥ÔºàÂåóÂú®‰∏äÔºâ
                h - padding - (y - minY) * sy
            ]);
        }

        function renderTrack(mode = 'car') {
            const canvas = document.getElementById('trackCanvas');
            const ctx = canvas.getContext('2d');
            // Â§ÑÁêÜÈ´òÂàÜÂ±è
            const cssW = canvas.clientWidth;
            const cssH = canvas.clientHeight;
            const ratio = window.devicePixelRatio || 1;
            canvas.width = cssW * ratio;
            canvas.height = cssH * ratio;
            ctx.scale(ratio, ratio);

            ctx.clearRect(0, 0, cssW, cssH);

            // Â∫ïÂõæÁΩëÊ†º
            ctx.strokeStyle = '#e9ecef';
            ctx.lineWidth = 1;
            for (let i = 40; i < cssW; i += 40) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, cssH); ctx.stroke(); }
            for (let j = 40; j < cssH; j += 40) { ctx.beginPath(); ctx.moveTo(0, j); ctx.lineTo(cssW, j); ctx.stroke(); }

            // Âú∞ÂΩ¢Â∫ïËâ≤ÔºàÁ§∫ÊÑèÔºâÔºöÂ±±Âú∞(ÈïøÁôΩÂ±±/ÈòøÂ∞îÂ±±)„ÄÅÊ£ÆÊûó(Â§ßÂÖ¥ÂÆâÂ≤≠)„ÄÅËçâÂéü(Âëº‰º¶Ë¥ùÂ∞î)
            const geo = trackCities.map(n => placeCoords[n]);
            const projAll = project(geo, cssW, cssH);
            const idx = (name) => trackCities.indexOf(name);
            function fillArea(names, color) {
                const pts = names.map(n => projAll[idx(n)]).filter(Boolean);
                if (pts.length < 2) return;
                const pad = 40;
                const xs = pts.map(p => p[0]);
                const ys = pts.map(p => p[1]);
                const minX = Math.min(...xs) - pad, maxX = Math.max(...xs) + pad;
                const minY = Math.min(...ys) - pad, maxY = Math.max(...ys) + pad;
                ctx.fillStyle = color;
                ctx.globalAlpha = 0.10;
                ctx.fillRect(minX, minY, maxX - minX, maxY - minY);
                ctx.globalAlpha = 1.0;
            }
            fillArea(["ÈïøÁôΩÂ±±", "ÈòøÂ∞îÂ±±"], '#2d3436'); // Â±±Âú∞
            fillArea(["‰ºäÊò•", "ÈªëÊ≤≥", "ÂåóÊûÅÊùë"], '#27ae60'); // Ê£ÆÊûó
            fillArea(["Ê†πÊ≤≥", "È¢ùÂ∞îÂè§Á∫≥", "Êµ∑ÊãâÂ∞î", "Êª°Ê¥≤Èáå"], '#a3cb38'); // ËçâÂéü

            // È©æËΩ¶‰∏ªËΩ®Ëøπ
            const proj = projAll;
            if (mode === 'car' || mode === 'both') {
                ctx.strokeStyle = '#0984e3';
                ctx.lineWidth = 3;
                ctx.beginPath();
                proj.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
                ctx.stroke();
            }

            // Ê†áÊ≥®ËäÇÁÇπ
            ctx.fillStyle = '#2d3436';
            ctx.font = '12px sans-serif';
            window.__trackPoints = [];
            proj.forEach(([x, y], i) => {
                ctx.beginPath();
                ctx.fillStyle = '#74b9ff';
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#2d3436';
                ctx.fillText(trackCities[i], x + 6, y - 6);
                window.__trackPoints.push({ name: trackCities[i], x, y });
            });

            // ÂüéÂ∏ÇÂú∞ÈìÅÔºàÁ§∫ÊÑèÔºå‰ªÖÂú®ÈïøÊò•/ÂìàÂ∞îÊª®ÊòæÁ§∫Ôºâ
            if (mode === 'metro' || mode === 'both') {
                const cc = placeCoords['ÈïøÊò•'];
                const hb = placeCoords['ÂìàÂ∞îÊª®'];
                const projMetro = project([cc, hb], cssW, cssH); // Ëé∑ÂèñÂ§ßËá¥Áº©Êîæ

                // ÈïøÊò•Âú∞ÈìÅÁ§∫ÊÑè ‰∏§Á´ôËøûÁ∫ø
                const ccPts = [
                    offset(projMetro[0], -20, 10), // ‰∫∫Ê∞ëÂπøÂú∫
                    offset(projMetro[0], 30, -15)  // Ëß£ÊîæÂ§ßË∑Ø
                ];
                drawMetro(ctx, ccPts, '#e17055');
                drawMetroStations(ctx, ccPts, ['‰∫∫Ê∞ëÂπøÂú∫', 'Ëß£ÊîæÂ§ßË∑Ø']);

                // ÂìàÂ∞îÊª®Âú∞ÈìÅÁ§∫ÊÑè ‰∏§Á´ôËøûÁ∫ø
                const hbPts = [
                    offset(projMetro[1], -10, -15), // ‰∏≠Â§ÆÂ§ßË°ó
                    offset(projMetro[1], 25, 5)     // ÂçöÁâ©È¶Ü
                ];
                drawMetro(ctx, hbPts, '#6c5ce7');
                drawMetroStations(ctx, hbPts, ['‰∏≠Â§ÆÂ§ßË°ó', 'ÂçöÁâ©È¶Ü']);
            }
            // ÊÆµË∑ùÁ¶ª‰∏éÊó∂ÈïøÊ†áÊ≥®
            window.__trackLegs = [];
            for (let i = 0; i < trackCities.length - 1; i++) {
                const a = trackCities[i], b = trackCities[i + 1];
                const pa = proj[i], pb = proj[i + 1];
                const mx = (pa[0] + pb[0]) / 2, my = (pa[1] + pb[1]) / 2;
                const key = `${a}-${b}`;
                const dayIdx = legToDay[key];
                const day = tripDays.find(d => d.d === dayIdx);
                const drive = day ? `${day.distance}km / ${day.hours}h` : '';
                const directKm = Math.round(haversine(placeCoords[a], placeCoords[b]));
                ctx.fillStyle = 'rgba(0,0,0,0.6)';
                ctx.fillRect(mx - 44, my - 18, 88, 28);
                ctx.fillStyle = '#fff';
                ctx.font = '12px sans-serif';
                ctx.fillText(`${directKm}km`, mx - 38, my - 2);
                if (drive) ctx.fillText(drive, mx - 38, my + 12);
                window.__trackLegs.push({ a, b, mx, my, idx: i });
            }
        }

        function offset([x, y], dx, dy) { return [x + dx, y + dy]; }

        function drawMetro(ctx, pts, color) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.setLineDash([6, 4]);
            ctx.beginPath();
            pts.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function drawMetroStations(ctx, pts, names) {
            ctx.fillStyle = '#2d3436';
            ctx.font = '12px sans-serif';
            pts.forEach(([x, y], i) => {
                ctx.beginPath();
                ctx.fillStyle = '#fff';
                ctx.strokeStyle = '#2d3436';
                ctx.lineWidth = 1.5;
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
                ctx.stroke();
                ctx.fillStyle = '#2d3436';
                ctx.fillText(names[i], x + 6, y - 6);
            });
        }

        function focusOn(fromName, toName) {
            renderTrack('car');
            // ÁÆÄÊòìÈ´ò‰∫ÆÔºöÂÜçÊ¨°ÁªòÂà∂ËØ•ÊÆµ‰∏∫Á∫¢Ëâ≤Á≤óÁ∫ø
            const canvas = document.getElementById('trackCanvas');
            const ctx = canvas.getContext('2d');
            const cssW = canvas.clientWidth;
            const cssH = canvas.clientHeight;
            const ratio = window.devicePixelRatio || 1;
            ctx.save();
            ctx.scale(1 / ratio, 1 / ratio); // ÂèñÊ∂àÂÖàÂâçscaleÂΩ±Âìç
            ctx.scale(ratio, ratio);
            const from = placeCoords[fromName];
            const to = placeCoords[toName];
            const path = [from, to];
            const proj = project(path, cssW, cssH);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(proj[0][0], proj[0][1]);
            ctx.lineTo(proj[1][0], proj[1][1]);
            ctx.stroke();
            ctx.restore();
        }

        // ÂàáÊç¢È´òÁ≤æÂú∞ÂΩ¢ÂõæÔºàLeaflet + OpenTopoMapÔºâ
        let leafletInited = false;
        function toggleTopoMap() {
            const ele = document.getElementById('leafletMap');
            const isHidden = ele.style.display === 'none' || ele.style.display === '';
            if (isHidden) {
                ele.style.display = 'block';
                if (!leafletInited) initLeaflet();
            } else {
                ele.style.display = 'none';
            }
        }

        function initLeaflet() {
            leafletInited = true;
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
            script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
            script.crossOrigin = '';
            script.onload = () => {
                const map = L.map('leafletMap', { zoomControl: false }).setView([48.5, 124.0], 4);
                L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                    maxZoom: 17,
                    attribution: 'Map data: ¬© OpenStreetMap contributors, SRTM | Map style: ¬© OpenTopoMap'
                }).addTo(map);
                L.control.zoom({ position: 'bottomright' }).addTo(map);

                // Ê∑ªÂä†ÈÄîÁªèÁÇπ‰∏éÊé®ËçêÂõæ
                trackCities.forEach(name => {
                    const [lon, lat] = placeCoords[name];
                    const icon = L.circleMarker([lat, lon], { radius: 5, color: '#0984e3' }).addTo(map);
                    const imgs = (poiBest[name]?.imgs) || [];
                    const best = poiBest[name]?.best || '';
                    const html = `<b>${name}</b><br/>${best}<br/>${imgs[0] ? `<img src="${imgs[0]}" style="width:220px;height:120px;object-fit:cover;margin-top:6px;border-radius:6px;"/>` : ''}`;
                    icon.bindPopup(html);
                });

                // ÁªòÂà∂Á∫øË∑Ø
                const latlngs = trackCities.map(n => {
                    const [lon, lat] = placeCoords[n];
                    return [lat, lon];
                });
                L.polyline(latlngs, { color: '#0984e3', weight: 3 }).addTo(map);
                map.fitBounds(L.polyline(latlngs).getBounds(), { padding: [20, 20] });
            };
            document.body.appendChild(script);
        }

        // ËΩªÈáèË∑ØÁ∫øËßÑÂàíÂõæÔºàCanvasÔºâÔºåÊèêÂçáÊµÅÁïÖÂ∫¶
        let routeMapInited = false;
        function toggleRouteMap() {
            const ele = document.getElementById('routeMap');
            const hidden = ele.style.display === 'none' || ele.style.display === '';
            ele.style.display = hidden ? 'block' : 'none';
            if (hidden && !routeMapInited) {
                routeMapInited = true;
                const c = document.createElement('canvas');
                c.style.width = '100%';
                c.style.height = '480px';
                c.width = 1200; c.height = 480;
                ele.appendChild(c);
                drawLightRoute(c);
            }
        }

        function drawLightRoute(canvas) {
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#f8fafc';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#e5e7eb';
            for (let i = 60; i < canvas.width; i += 60) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height); ctx.stroke(); }
            for (let j = 60; j < canvas.height; j += 60) { ctx.beginPath(); ctx.moveTo(0, j); ctx.lineTo(canvas.width, j); ctx.stroke(); }
            const points = trackCities.map(n => placeCoords[n]);
            const proj = project(points, canvas.width, canvas.height, 40);
            ctx.strokeStyle = '#16a34a';
            ctx.lineWidth = 3;
            ctx.beginPath();
            proj.forEach(([x, y], i) => { if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); });
            ctx.stroke();
            ctx.fillStyle = '#111827';
            ctx.font = '14px sans-serif';
            proj.forEach(([x, y], i) => {
                ctx.fillStyle = '#2563eb'; ctx.beginPath(); ctx.arc(x, y, 4, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#111827'; ctx.fillText(trackCities[i], x + 6, y - 6);
            });
        }

        // ÁêÉÈù¢Áõ¥Á∫øË∑ùÁ¶ªÔºàÂçÉÁ±≥Ôºâ
        function haversine([lon1, lat1], [lon2, lat2]) {
            const toRad = d => d * Math.PI / 180;
            const R = 6371; // km
            const dLat = toRad(lat2 - lat1);
            const dLon = toRad(lon2 - lon1);
            const a = Math.sin(dLat / 2) ** 2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        // ËΩ®ËøπÊÇ¨ÊµÆÊèêÁ§∫ÔºàÂüéÂ∏Ç/Á∫øÊÆµÔºâ
        (function attachTrackHover() {
            const canvas = document.getElementById('trackCanvas');
            const tip = document.getElementById('trackTooltip');
            const tTitle = document.getElementById('tooltipTitle');
            const tImg = document.getElementById('tooltipImg');
            const tMeta = document.getElementById('tooltipMeta');

            canvas.addEventListener('mousemove', (e) => {
                if (!window.__trackPoints) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                let shown = false;

                // ÂëΩ‰∏≠ÂüéÂ∏ÇÁÇπ
                for (const p of window.__trackPoints) {
                    const dx = p.x - x, dy = p.y - y;
                    if (dx * dx + dy * dy < 10 * 10) {
                        const imgs = (poiBest[p.name]?.imgs) || [];
                        tTitle.textContent = `${p.name}ÔΩúÊé®ËçêÔºö${poiBest[p.name]?.best || ''}`;
                        if (imgs[0]) tImg.src = imgs[0];
                        tMeta.textContent = 'ÊèêÁ§∫ÔºöÁßªÂà∞Á∫øÊÆµ‰∏≠ÁÇπÊü•ÁúãÁõ¥Á∫øË∑ùÁ¶ª‰∏éËá™È©æÊó∂Èïø';
                        tip.style.left = `${x + 12}px`;
                        tip.style.top = `${y + 12}px`;
                        tip.style.display = 'block';
                        shown = true; break;
                    }
                }

                // ÂëΩ‰∏≠Á∫øÊÆµ‰∏≠ÁÇπÁü©ÂΩ¢Âå∫Âüü
                if (!shown && window.__trackLegs) {
                    for (const leg of window.__trackLegs) {
                        if (Math.abs(leg.mx - x) < 60 && Math.abs(leg.my - y) < 24) {
                            const key = `${leg.a}-${leg.b}`;
                            const dayIdx = legToDay[key];
                            const day = tripDays.find(d => d.d === dayIdx);
                            const directKm = Math.round(haversine(placeCoords[leg.a], placeCoords[leg.b]));
                            tTitle.textContent = `${leg.a} ‚Üí ${leg.b}`;
                            tImg.src = (poiBest[leg.b]?.imgs?.[0]) || (poiBest[leg.a]?.imgs?.[0]) || '';
                            tMeta.textContent = `Áõ¥Á∫øÔºö${directKm}kmÔΩúËá™È©æÔºö${day ? day.distance + 'km / ' + day.hours + 'h' : '‚Äî'}`;
                            tip.style.left = `${x + 12}px`;
                            tip.style.top = `${y + 12}px`;
                            tip.style.display = 'block';
                            shown = true; break;
                        }
                    }
                }

                if (!shown) { tip.style.display = 'none'; }
            });

            canvas.addEventListener('mouseleave', () => { tip.style.display = 'none'; });
        })();

        // Ê∑ªÂä†È°µÈù¢ÊªöÂä®Âä®Áîª
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.attraction-card');
            cards.forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            });

            window.addEventListener('scroll', function () {
                cards.forEach(card => {
                    const cardTop = card.getBoundingClientRect().top;
                    const cardVisible = 150;

                    if (cardTop < window.innerHeight - cardVisible) {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }
                });
            });

            renderDayDetails();
            renderTrack('both');
        });
    </script>
</body>

</html>